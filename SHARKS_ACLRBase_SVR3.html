<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Corey Scholes">
<meta name="dcterms.date" content="2025-05-25">

<title>SHARKS_ACLRBase_SVR3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="SHARKS_ACLRBase_SVR3_files/libs/clipboard/clipboard.min.js"></script>
<script src="SHARKS_ACLRBase_SVR3_files/libs/quarto-html/quarto.js"></script>
<script src="SHARKS_ACLRBase_SVR3_files/libs/quarto-html/popper.min.js"></script>
<script src="SHARKS_ACLRBase_SVR3_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="SHARKS_ACLRBase_SVR3_files/libs/quarto-html/anchor.min.js"></script>
<link href="SHARKS_ACLRBase_SVR3_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SHARKS_ACLRBase_SVR3_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="SHARKS_ACLRBase_SVR3_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="SHARKS_ACLRBase_SVR3_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="SHARKS_ACLRBase_SVR3_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="SHARKS_ACLRBase_SVR3_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="SHARKS_ACLRBase_SVR3_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="SHARKS_ACLRBase_SVR3_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">1</span> Summary</a></li>
  <li><a href="#preparation" id="toc-preparation" class="nav-link" data-scroll-target="#preparation"><span class="header-section-number">2</span> Preparation</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background"><span class="header-section-number">3</span> Background</a>
  <ul class="collapse">
  <li><a href="#literature-benchmarks" id="toc-literature-benchmarks" class="nav-link" data-scroll-target="#literature-benchmarks"><span class="header-section-number">3.1</span> Literature Benchmarks</a></li>
  </ul></li>
  <li><a href="#study-question" id="toc-study-question" class="nav-link" data-scroll-target="#study-question"><span class="header-section-number">4</span> Study Question</a></li>
  <li><a href="#hypotheses" id="toc-hypotheses" class="nav-link" data-scroll-target="#hypotheses"><span class="header-section-number">5</span> Hypotheses</a></li>
  <li><a href="#methods---proposed" id="toc-methods---proposed" class="nav-link" data-scroll-target="#methods---proposed"><span class="header-section-number">6</span> Methods - Proposed</a>
  <ul class="collapse">
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources"><span class="header-section-number">6.1</span> Data sources</a></li>
  <li><a href="#sample-selection" id="toc-sample-selection" class="nav-link" data-scroll-target="#sample-selection"><span class="header-section-number">6.2</span> Sample selection</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables"><span class="header-section-number">6.3</span> Variables</a>
  <ul class="collapse">
  <li><a href="#the-moon-group" id="toc-the-moon-group" class="nav-link" data-scroll-target="#the-moon-group"><span class="header-section-number">6.3.1</span> The MOON Group</a></li>
  <li><a href="#other-variables" id="toc-other-variables" class="nav-link" data-scroll-target="#other-variables"><span class="header-section-number">6.3.2</span> Other variables</a></li>
  </ul></li>
  <li><a href="#data-collection" id="toc-data-collection" class="nav-link" data-scroll-target="#data-collection"><span class="header-section-number">6.4</span> Data Collection</a></li>
  </ul></li>
  <li><a href="#methods---analysis" id="toc-methods---analysis" class="nav-link" data-scroll-target="#methods---analysis"><span class="header-section-number">7</span> Methods - Analysis</a>
  <ul class="collapse">
  <li><a href="#visualisation" id="toc-visualisation" class="nav-link" data-scroll-target="#visualisation"><span class="header-section-number">7.1</span> Visualisation</a></li>
  <li><a href="#case-mixture-adjustment" id="toc-case-mixture-adjustment" class="nav-link" data-scroll-target="#case-mixture-adjustment"><span class="header-section-number">7.2</span> Case-mixture adjustment</a></li>
  </ul></li>
  <li><a href="#sample-size-considerations" id="toc-sample-size-considerations" class="nav-link" data-scroll-target="#sample-size-considerations"><span class="header-section-number">8</span> Sample size considerations</a></li>
  <li><a href="#ethical-considerations" id="toc-ethical-considerations" class="nav-link" data-scroll-target="#ethical-considerations"><span class="header-section-number">9</span> Ethical Considerations</a></li>
  <li><a href="#study-output" id="toc-study-output" class="nav-link" data-scroll-target="#study-output"><span class="header-section-number">10</span> Study Output</a>
  <ul class="collapse">
  <li><a href="#target-presentations" id="toc-target-presentations" class="nav-link" data-scroll-target="#target-presentations"><span class="header-section-number">10.1</span> Target Presentations</a></li>
  <li><a href="#target-publication" id="toc-target-publication" class="nav-link" data-scroll-target="#target-publication"><span class="header-section-number">10.2</span> Target Publication</a></li>
  </ul></li>
  <li><a href="#study-management" id="toc-study-management" class="nav-link" data-scroll-target="#study-management"><span class="header-section-number">11</span> Study Management</a>
  <ul class="collapse">
  <li><a href="#assumptions" id="toc-assumptions" class="nav-link" data-scroll-target="#assumptions"><span class="header-section-number">11.1</span> Assumptions</a></li>
  <li><a href="#activities" id="toc-activities" class="nav-link" data-scroll-target="#activities"><span class="header-section-number">11.2</span> Activities</a></li>
  <li><a href="#timeline" id="toc-timeline" class="nav-link" data-scroll-target="#timeline"><span class="header-section-number">11.3</span> Timeline</a></li>
  <li><a href="#contributors" id="toc-contributors" class="nav-link" data-scroll-target="#contributors"><span class="header-section-number">11.4</span> Contributors</a></li>
  <li><a href="#funding-and-conflicts-of-interest" id="toc-funding-and-conflicts-of-interest" class="nav-link" data-scroll-target="#funding-and-conflicts-of-interest"><span class="header-section-number">11.5</span> Funding and Conflicts of Interest</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SHARKS_ACLRBase_SVR3</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Corey Scholes </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 25, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">August 6, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="summary" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Summary</h1>
<p>The following plan proposes a study to assess the need for a case-mixture adjustment model with respect to baseline IKDC scores in patients electing to be added to the surgical wait list at QEII Hospital. The plan highlights key elements of a potential protocol and analysis that uses best-practice to develop, assess and compare models to the current knowledge with respect to interpretation of baseline scores. Considerations for sample size requirements and study management are presented. Some issues remain outstanding with respect to the exact configuration of a case-mixture adjustment model in this context and further development work is proposed to be included in protocol development, as part of an activities list based on open science practices.</p>
</section>
<section id="preparation" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Preparation</h1>
<p>Libraries and packages were installed for further analysis.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="co"># Load required packages</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"pmsampsize"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gargle"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"googledrive"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"pwrss"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"rcrossref"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tidyverse"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"googlesheets4"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"epoxy"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ggdist"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"simstudy"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DiagrammeR"</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ggdag"</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"forcats"</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gtsummary"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gt"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"fabricatr"</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"broom"</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"broom.mixed"</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"broom.helpers"</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lme4"</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"performance"</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"marginaleffects"</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"sjPlot"</span>,</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"simr"</span>,</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"memoise"</span>,</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"progress"</span>,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">install =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">update =</span> <span class="cn">FALSE</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="background" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Background</h1>
<p><em>The use of PROMs</em></p>
<p>Patient-reported outcome measures are used increasingly to routinely assess patients’ subjective experiences during recovery from initial injury of the anterior cruciate ligament, or subsequent surgical reconstruction, in both research and clinical settings <span class="citation" data-cites="ridha2025">(<a href="#ref-ridha2025" role="doc-biblioref">Ridha et al. 2025</a>)</span>. Standardised PROMs can provide important insight into multiple dimensions of physical, mental and functional state at the consistent time points of the recovery trajectory and have also been used to define clinical failure after reconstruction <span class="citation" data-cites="aldag2023">(<a href="#ref-aldag2023" role="doc-biblioref">Aldag et al. 2023</a>)</span>. Work by the department has also revealed heterogeneous patterns in patients presenting for surgical review of ACL injury when PROMs assessing different dimenions of pain, function and general health are assessed simultaneously <span class="citation" data-cites="ting2020">(<a href="#ref-ting2020" role="doc-biblioref">Ting et al. 2020</a>)</span>.</p>
<p>The most frequent pathology and joints-specific PROMs for monitoring recovery after ACL reconstruction are the KOOS family (JR, 12, full) and the IKDC2000 (International Knee Documentation Committee). The IKDC2000 was chosen for the SHARKS registry due to content validity specific to ACL reconstruction. It contains one question (Symptoms Q7) that is relevant to the motivations of offering surgery in the majority of cases - <em>what is the highest level of activity you can participate in without experiencing episodes of giving way in the knee?</em><br>
<br>
The IKDC is an 18 question evaluation that measures symptoms (7 items), activities of daily living (9 items) and sport (1 item), and comparative knee function (1 item - not included in total score). Items are scored on a ordinal scale, and equally weighted to give a final score from 0 (high symptoms, low function) to 100 (no symptoms or limitations) <span class="citation" data-cites="irrgang2001">(<a href="#ref-irrgang2001" role="doc-biblioref">Irrgang et al. 2001</a>)</span>. Good validity, responsiveness and reliability in knee surgery patients. MCID at 6 months = 6.3 and at 12 months = 16.7 <span class="citation" data-cites="collins2011 winterstein2013">(<a href="#ref-collins2011" role="doc-biblioref">N. J. Collins et al. 2011</a>; <a href="#ref-winterstein2013" role="doc-biblioref">Winterstein et al. 2013</a>)</span>. To account for the potential confounding effect of age and sex on IKDC scores, a z-score method was published <span class="citation" data-cites="anderson2006">(<a href="#ref-anderson2006" role="doc-biblioref">Anderson et al. 2006</a>)</span>, whereby an individual score could be substracted from the mean of the matching age and sex subgroup to the patient, with the difference divided by the subgroup standard deviation.</p>
<p><em>Discussing PROMs in literature and qualitative comparisons</em></p>
<p>However, a key challenge in the implementation of PROMs in the context of service delivery to patients with ACL injury, is understanding whether treatment responses are comparable from one published report to the next. The standard method in general, is to take summary statistics, usually mean and standard deviation and make a qualitative comparison to other papers that are in turn, qualitatively judged to be comparable to the sample in question. Without a systematic approach to benchmarking results, the interpretation of PROMs can be misled by biases arising from confounding.</p>
<p><em>Importance of adjustment</em></p>
<p>Confounding bias occurs when a variable of interest and a target outcome are simultaneously influenced by a third variable <span class="citation" data-cites="tennant2020">(<a href="#ref-tennant2020" role="doc-biblioref">Tennant et al. 2020</a>)</span>. In the proposed study, the variable of interest would be the source of IKDC population estimate (study) and the outcome would be the IKDC total score, while the third variable (the confounder) might be age at the time of initial presentation. An adjustment in this context would compare the IKDC total score between studies within a multivariable regression, which parses out the influence of each variable on the variability of the IKDC score.</p>
<p>Variation in context (setting, patient demographics, service delivery)</p>
<section id="literature-benchmarks" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="literature-benchmarks"><span class="header-section-number">3.1</span> Literature Benchmarks</h2>
<p>The natural entry point into benchmarking local data is to draw on the existing literature in one of two ways. The first is to make a comparison across <em>all</em> available reports and place the local sample within the context of all findings. The second is to conduct a matching process and identify reports that best match the context and data-generation of the local sample and make targeted comparisons.</p>
<p>Let’s start with the first approach and draw on as broader pool as possible. A recent systematic review <span class="citation" data-cites="ridha2025">(<a href="#ref-ridha2025" role="doc-biblioref">Ridha et al. 2025</a>)</span> may provide an initial framework to draw from. It reviewed papers reporting the IKDC(2000) from baseline through to 2 years after surgical reconstruction, as well as non-operative management over the same time period.</p>
<div id="fig-radhi2024" class="quarto-figure quarto-figure-center quarto-float anchored" alt="Line plot of IKDC2000 trajectories after surgical reconstruction">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-radhi2024-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Radhi%20et%20al%20Figure%202.png" class="img-fluid figure-img" alt="Line plot of IKDC2000 trajectories after surgical reconstruction">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-radhi2024-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Trajectory of IKDC2000 up to 24 months after surgical reconstruction (left) or after injury with nonsurgical management (right). Reproduced from <span class="citation" data-cites="ridha2025">(<a href="#ref-ridha2025" role="doc-biblioref">Ridha et al. 2025</a>)</span>.
</figcaption>
</figure>
</div>
<p>The baseline variation for surgical reconstruction cases in <a href="#fig-radhi2024" class="quarto-xref">Figure&nbsp;1</a> is relatively wide, from ~20 up to ~90 points. It can be seen that the majority of the included papers report baseline data within the range 40-70. The figure illustrates a key pitfall of reviewing studies of PROMs in general, and the IKDC in particular. One study illustrated on the plot resides near zero for all time points. This is a misinterpretation by the review authors, although the paper should be excluded for other reasons. The IKDC2000 can be reported with a <em>normalised</em> score, which takes the sum of the available responses and converts it to a percentage of the maximum score available (with a scale of 0-100). The original paper (Rajput et al 2020) identified used a <em>normative</em> version of the IKDC score, first reported by <span class="citation" data-cites="anderson2006">(<a href="#ref-anderson2006" role="doc-biblioref">Anderson et al. 2006</a>)</span>, which calculates a z-score of the normalised score relative to the mean and standard deviation of an age and sex matched cohort. To make matters more complicated for reviewers, the normative score can be generated with two sets of age and sex-matched cohorts - with and without knee injury at the time of cross-sectional survey. The lack of reporting in Rajput et al (it does not state which normative dataset was used to generate the results) should disqualify it from inclusion in the review, and for our purposes here.</p>
</section>
</section>
<section id="study-question" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Study Question</h1>
<p>The study question was presented using the PICOS framework <span class="citation" data-cites="amir-behghadami2020">(<a href="#ref-amir-behghadami2020" role="doc-biblioref">Amir-Behghadami and Janati 2020</a>)</span>.</p>
<div id="tbl-question1" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-question1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Study question 1 identified under the PICOS framework
</figcaption>
<div aria-describedby="tbl-question1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 5%">
<col style="width: 48%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Participants</td>
<td>Patients presenting with injury of the anterior cruciate ligament</td>
<td>Patients present under variable circumstances, with referrals from emergency or primary care</td>
</tr>
<tr class="even">
<td>Intervention</td>
<td>Electing to be added to the wait list for surgical reconstruction within the public health system</td>
<td>Typical wait times within the department are ~4months from initial consultation</td>
</tr>
<tr class="odd">
<td>Comparator</td>
<td>Compared to the published literature</td>
<td>Split into two approaches - overall combined results (meta-analysis) or with selective matching of contextually similar studies</td>
</tr>
<tr class="even">
<td>Outcomes</td>
<td>Is baseline IKDC significantly different to published data when adjusted for confounders with respect to normalised or z-score totals</td>
<td></td>
</tr>
<tr class="odd">
<td>Study Design</td>
<td>Meta-analysis and simulation</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="tbl-question2" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-question2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Study question 2 identified under the PICOS framework
</figcaption>
<div aria-describedby="tbl-question2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 55%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Population</td>
<td>Patients presenting with injury of the anterior cruciate ligament electing to be added to the surgical wait list</td>
<td></td>
</tr>
<tr class="even">
<td>Intervention</td>
<td>Development and application of a multivariable case-mixture adjustment model to baseline IKDC scores, accounting for the heterogeneity in case presentation</td>
<td>Application of a case-mixture adjustment model, may incorporate results of Question 1 with respect to regional-methods factors</td>
</tr>
<tr class="odd">
<td>Comparator</td>
<td><p>Compared internally to unadjusted IKDC scores</p>
<p>Compared externally to existing risk adjustment models <span class="citation" data-cites="burgess2019">(<a href="#ref-burgess2019" role="doc-biblioref">Burgess et al. 2019</a>)</span></p></td>
<td></td>
</tr>
<tr class="even">
<td>Outcome</td>
<td>The model will demonstrate the need for adjustments that exceed published metrics for IKDC (e.g.&nbsp;MCID), as well as adequate calibration and clinical utility for implementation</td>
<td></td>
</tr>
<tr class="odd">
<td>Study Design</td>
<td>Cross-sectional observational study with retrospective model development and internal validation</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="hypotheses" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Hypotheses</h1>
<p>Each question posed for this project generates a number of clinical and statistical hypotheses, summarised below.</p>
<div id="tbl-hypotheses" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-hypotheses-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Summary of clinical and statistical hypotheses associated with Question 1
</figcaption>
<div aria-describedby="tbl-hypotheses-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 5%">
<col style="width: 51%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Clinical</th>
<th>Statistical</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Question 1 - Null</td>
<td></td>
<td>After adjusting for confounders, there is no difference in IKDC scores between our population and the published literature</td>
</tr>
<tr class="even">
<td>Question 1 - Alternative</td>
<td>Patients with anterior cruciate ligament injuries presenting to QEII Hospital have baseline (IKDC) scores that differ significantly from those reported in the published literature, after adjusting for relevant patient and injury characteristics</td>
<td>After adjusting for confounders, there remains a significant difference in IKDC scores between our population and the published literature</td>
</tr>
<tr class="odd">
<td>Question 2 - Null</td>
<td>A case-mixture adjustment model offers no clinical benefit on raw IKDC scores collected as part of routine practice at baseline assessment</td>
<td>A multivariable model incorporating case-mix variables cannot significantly predict baseline IKDC scores beyond random chance (R² = 0) OR the model demonstrates poor calibration and lacks clinical utility</td>
</tr>
<tr class="even">
<td>Question 2 - Alternative</td>
<td>Sufficient heterogeneity exists in baseline IKDC scores that can be explained by measurable patient and injury characteristics that justifies the need for case-mixture adjustment.</td>
<td>A multivariable case-mix model can significantly predict baseline IKDC scores with clinically meaningful accuracy (R² ≥ 0.3), calibration and clinical utility</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="methods---proposed" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Methods - Proposed</h1>
<section id="data-sources" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="data-sources"><span class="header-section-number">6.1</span> Data sources</h2>
<p>Local sample - the local sample will be derived from the SHARKS registry. The SHARKS registry is an HREC-approved clinical registry embedded into the department of orthopaedics at QEII Jubilee Hospital. More information is available from the most recent <a href="https://coreyscholes-sharks-governance.share.connect.posit.cloud/">governance report</a>. The Tibiofemoral Instability cohort of the registry draws in patients presenting with injury or other pathology of the ligaments (cruciate | collateral) and complexes of the posterior lateral or medial corners.</p>
<p>Literature - a non-systematic search will be conducted of Pubmed, Google Scholar to retrieve systematic reviews describing the trajectory of IKDC from baseline to followup, or including papers describing the IKDC at least at baseline prior to surgical reconstruction or non-operative management. The <em>citationchaser</em> application <span class="citation" data-cites="haddaway2021">Haddaway, Grainger, and Gray (<a href="#ref-haddaway2021" role="doc-biblioref">2021</a>)</span> will be used to retrieve citations from relevant reviews and meta-analyses. Where available, full-text sources will be retrieved and baseline IKDC and relevant contextual factors extracted and summarised in spreadsheet form for further processing.</p>
</section>
<section id="sample-selection" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="sample-selection"><span class="header-section-number">6.2</span> Sample selection</h2>
<p>Cases will be retrieved from SHARKS that match the criteria described in <span class="citation" data-cites="ting2020">Ting et al. (<a href="#ref-ting2020" role="doc-biblioref">2020</a>)</span> and summarised below.</p>
<div id="tbl-criteria" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-criteria-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Summary of inclusion and exclusion criteria for local sample
</figcaption>
<div aria-describedby="tbl-criteria-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 22%">
<col style="width: 46%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th>Inclusion</th>
<th>Exclusion</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Enrolled in SHARKS registry</td>
<td>Surgical booking not offered</td>
<td>Inclusion criteria for SHARKS can be reviewed on wiki or governance report</td>
</tr>
<tr class="even">
<td>Primary presentation</td>
<td>Presentation is the contralateral limb of a previous ACL rupture</td>
<td></td>
</tr>
<tr class="odd">
<td>Clinical and imaging-supported diagnosis of ACL rupture</td>
<td>ACL pathology is a non-traumatic or congenital absence or deficiency</td>
<td></td>
</tr>
<tr class="even">
<td>Concomitant pathology is limited to menisci</td>
<td>Pathology to collateral and other cruciate ligaments deemed to require surgical reconstruction at the time of surgery</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>Withdrawal of consent to participate in registry prior to surgery</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="variables" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="variables"><span class="header-section-number">6.3</span> Variables</h2>
<p>The study dataset will be drawn from three main sources. The first is the SHARKS dataset, specifically for the Tibiofemoral Instability cohort, which can be found on the <a href="https://sites.google.com/ebma.com.au/sharksregistry/section-2-cohorts/2-6-knee-tibiofemoral-instability">registry wiki</a>.</p>
<p>The second source is to review the relevant literature and identify any other variables that may not already be collected in the registry dataset, but may be relevant to answering the question posed. An initial review is included below - to be expanded further for the study analysis.</p>
<p>Previous work by our group reported no relationship between PROMs phenotype (cluster) and patient age, sex, body mass index or injury to examination delay <span class="citation" data-cites="ting2020">Ting et al. (<a href="#ref-ting2020" role="doc-biblioref">2020</a>)</span>. Importantly, this study did not directly assess the relationship (adjusted or unadjusted) between baseline IKDC and patient demographics. There is a paucity of data addressing this question directly in the literature, therefore related literature will be drawn on to build a directed acyclic graph, to identify a reasonable adjustment set informing the study dataset.</p>
<section id="the-moon-group" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="the-moon-group"><span class="header-section-number">6.3.1</span> The MOON Group</h3>
<p>The first place to start is the <a href="https://acltear.info/">MOON</a> (Multicentre Orthopaedic Outcomes Network) Knee Group, which is a prospective cohort registry of anterior cruciate injuries and surgical reconstruction across 19 physicians and 7 health institutions in the United States, that have enrolled &gt;3500 cases since 2002.</p>
<p>Research from this dataset has identified time from injury to surgery as a key factor influencing baseline IKDC scores for primary ACL injury <span class="citation" data-cites="nguyen2016">(<a href="#ref-nguyen2016" role="doc-biblioref">Nguyen et al. 2016</a>)</span>. Adjusted for covariates.</p>
<p>Factors associated with more pain at baseline were higher body mass index, female sex, concomitant lateral collateral ligament injury and older age <span class="citation" data-cites="dunn2010">(<a href="#ref-dunn2010" role="doc-biblioref">Dunn et al. 2010</a>)</span>.</p>
<p>The MOON group previously compared their baseline data (N = 713) to the Norwegian Knee Ligament Registry (N = 4928) <span class="citation" data-cites="magnussen2009">(<a href="#ref-magnussen2009" role="doc-biblioref">Magnussen et al. 2009</a>)</span> and observed the following;</p>
<ul>
<li><p>Significant difference in age at surgery</p></li>
<li><p>Significant difference in sex proportions</p></li>
<li><p>Considerable differences in activity associated with injury</p></li>
<li><p>Significant difference in time from injury to surgery</p></li>
<li><p>Significant difference in meniscal and chondral pathology incidence</p></li>
<li><p>Significant differences in all but one (QoL) subscales of KOOS, but none of the differences exceeded MCID except for “other symptoms”. However, this was based on an <em>unadjusted</em> comparison.</p></li>
</ul>
</section>
<section id="other-variables" class="level3" data-number="6.3.2">
<h3 data-number="6.3.2" class="anchored" data-anchor-id="other-variables"><span class="header-section-number">6.3.2</span> Other variables</h3>
<p>There are other factors that have not been raised in the literature to date that should be taken into account when attempting to compare samples drawn from a <em>global</em> population.</p>
<p>Patient</p>
<ul>
<li><p>Comorbidities</p></li>
<li><p>General health</p></li>
<li><p>Education</p></li>
<li><p>Bilateral status (index injury or subsequent to contralateral)</p></li>
<li><p>Surgical history (ipsilateral knee | limb)<br>
</p></li>
</ul>
<p>Healthcare setting</p>
<ul>
<li><p>Type of service (public, private, other)</p></li>
<li><p>Referral pathway includes emergency department within facility</p></li>
<li><p>Country | state referral pathways and regulations</p></li>
</ul>
<p>Data collection setting</p>
<ul>
<li><p>Cohort or randomised trial of limited scope vs regional, state or national registry</p></li>
<li><p>Consent model (opt in vs opt-out)</p></li>
</ul>
<p>Measurements</p>
<ul>
<li><p>Collection method (paper vs electronic)</p></li>
<li><p>PROMs version</p></li>
<li><p>Scoring method (normalised vs z-score)</p></li>
</ul>
<div id="tbl-variables" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-variables-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5: Summary of study variables required
</figcaption>
<div aria-describedby="tbl-variables-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 17%">
<col style="width: 11%">
<col style="width: 22%">
<col style="width: 10%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Category</th>
<th>Variable</th>
<th>Type - Response</th>
<th>Available SHARKS</th>
<th>Model Parameters</th>
<th>Available Published</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Patient</td>
<td>Age at presentation</td>
<td>Continuous - Years</td>
<td>Yes</td>
<td>1 -3</td>
<td>Yes</td>
</tr>
<tr class="even">
<td></td>
<td>Sex</td>
<td>Categorical</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td></td>
<td>Activity Type</td>
<td>Categorical</td>
<td>No</td>
<td>1</td>
<td>Possible (not universal)</td>
</tr>
<tr class="even">
<td></td>
<td>Activity Level</td>
<td>Ordinal</td>
<td>Yes - Tegner Activity Scale</td>
<td>1 - 10</td>
<td>Possible (not universal)</td>
</tr>
<tr class="odd">
<td></td>
<td>Body Mass Index</td>
<td>Continuous</td>
<td>Yes</td>
<td>1 - 3</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>General Health</td>
<td>Continuous</td>
<td>Yes - VR12</td>
<td>1 - 3</td>
<td>Unlikely (not usually collected)</td>
</tr>
<tr class="odd">
<td>Referral Pathway</td>
<td>Injury to Review delay</td>
<td>Continuous</td>
<td>Partial - chart review will be required</td>
<td>1 - 3</td>
<td>Possible (not universal)</td>
</tr>
<tr class="even">
<td>Pathology</td>
<td>Concomitant ligament injury</td>
<td>Categorical</td>
<td>Partial - chart review will be required</td>
<td>1</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td></td>
<td>Concomitant meniscal pathology</td>
<td>Categorical</td>
<td>Partial - chart review will be required</td>
<td>1</td>
<td>Yes; form of capture can vary between studies</td>
</tr>
<tr class="even">
<td>Setting</td>
<td>Service Type</td>
<td>Categorical</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td></td>
<td>Consent Model</td>
<td>Categorical</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Measurement</td>
<td>Data Collection</td>
<td>Categorical</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td></td>
<td>PROMs version</td>
<td>Categorical</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
</tr>
<tr class="even">
<td></td>
<td>Scoring method</td>
<td>Categorical</td>
<td>Yes</td>
<td>1</td>
<td>Possible; often not described</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The list of potential variables to include in the literature-based or local adjustment models is quite extensive, as shown in <a href="#tbl-variables" class="quarto-xref">Table&nbsp;5</a>. Further work is required to refine the list to a manageable size.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>DAGPROM <span class="ot">&lt;-</span> ggdag<span class="sc">::</span><span class="fu">dagify</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  IKDCBase <span class="sc">~</span> Sample <span class="sc">+</span> Age <span class="sc">+</span> Sex <span class="sc">+</span> BMI <span class="sc">+</span> Bilateral <span class="sc">+</span> MeniscPath <span class="sc">+</span> ChondPath <span class="sc">+</span> InjuryPres <span class="sc">+</span> ActivityLevel <span class="sc">+</span> GeneralHealth <span class="sc">+</span> ServiceType <span class="sc">+</span> CollectType <span class="sc">+</span> CollectMethod,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  Sample <span class="sc">~</span> Age <span class="sc">+</span> Sex <span class="sc">+</span> BMI <span class="sc">+</span> Bilateral <span class="sc">+</span> MeniscPath <span class="sc">+</span> ChondPath <span class="sc">+</span> InjuryPres <span class="sc">+</span> ActivityLevel <span class="sc">+</span> GeneralHealth <span class="sc">+</span> ServiceType <span class="sc">+</span> CollectType <span class="sc">+</span> CollectMethod,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  Bilateral <span class="sc">~</span> Age <span class="sc">+</span> Sex,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  BMI <span class="sc">~</span> Age <span class="sc">+</span> Sex <span class="sc">+</span> ActivityLevel,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  GeneralHealth <span class="sc">~</span> Age <span class="sc">+</span> ActivityLevel <span class="sc">+</span> Sex <span class="sc">+</span> BMI,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  MeniscPath <span class="sc">~</span> Age <span class="sc">+</span> ActivityLevel <span class="sc">+</span> Sex <span class="sc">+</span> BMI <span class="sc">+</span> InjuryPres,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  ChondPath <span class="sc">~</span> Age <span class="sc">+</span> ActivityLevel <span class="sc">+</span> Sex <span class="sc">+</span> BMI <span class="sc">+</span> InjuryPres,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  ActivityLevel <span class="sc">~</span> Age <span class="sc">+</span> Sex <span class="sc">+</span> BMI <span class="sc">+</span> Bilateral,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  InjuryPres <span class="sc">~</span> ServiceType <span class="sc">+</span> CollectType <span class="sc">+</span> ActivityLevel,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"IKDBase"</span> <span class="ot">=</span> <span class="st">"Baseline IKDC"</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sample"</span> <span class="ot">=</span> <span class="st">"Study </span><span class="sc">\n</span><span class="st"> group"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Age"</span> <span class="ot">=</span> <span class="st">"Age at</span><span class="sc">\n</span><span class="st"> Initial Exam"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sex"</span> <span class="ot">=</span> <span class="st">"Sex"</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"BMI"</span> <span class="ot">=</span> <span class="st">"Body Mass</span><span class="sc">\n</span><span class="st"> Index"</span>,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Bilateral"</span> <span class="ot">=</span> <span class="st">"Bilateral Presentation"</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MeniscPath"</span> <span class="ot">=</span> <span class="st">"Meniscal</span><span class="sc">\n</span><span class="st"> Pathology"</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ChondPath"</span> <span class="ot">=</span> <span class="st">"Chondral</span><span class="sc">\n</span><span class="st"> Pathology"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"InjuryPres"</span> <span class="ot">=</span> <span class="st">"Injury to</span><span class="sc">\n</span><span class="st"> Presentation"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ActivityLevel"</span> <span class="ot">=</span> <span class="st">"Activity</span><span class="sc">\n</span><span class="st"> Level"</span>, </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GeneralHealth"</span> <span class="ot">=</span> <span class="st">" General</span><span class="sc">\n</span><span class="st"> Health"</span>,</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ServiceType"</span> <span class="ot">=</span> <span class="st">"Health Service</span><span class="sc">\n</span><span class="st"> Type"</span>,</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CollectType"</span> <span class="ot">=</span> <span class="st">"Collection Service/n Type"</span>,</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CollectMethod"</span> <span class="ot">=</span> <span class="st">"Method of</span><span class="sc">\n</span><span class="st"> Collection"</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">"Sample"</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">"IKDCBase"</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tidy version of the DAG and apply custom labels</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>tidy_dag1 <span class="ot">&lt;-</span> ggdag<span class="sc">::</span><span class="fu">tidy_dagitty</span>(DAGPROM, <span class="at">layout =</span> <span class="st">"auto"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"IKDBase"</span> <span class="sc">~</span> <span class="st">"Baseline IKDC"</span>,</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"Sample"</span> <span class="sc">~</span> <span class="st">"Study </span><span class="sc">\n</span><span class="st"> group"</span>,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"Age"</span> <span class="sc">~</span> <span class="st">"Age at</span><span class="sc">\n</span><span class="st"> Initial Exam"</span>,</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"Sex"</span> <span class="sc">~</span> <span class="st">"Sex"</span>,</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"BMI"</span> <span class="sc">~</span> <span class="st">"Body Mass</span><span class="sc">\n</span><span class="st"> Index"</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"Bilateral"</span> <span class="sc">~</span> <span class="st">"Bilateral Presentation"</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"MeniscPath"</span> <span class="sc">~</span> <span class="st">"Meniscal</span><span class="sc">\n</span><span class="st"> Pathology"</span>,</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"ChondPath"</span> <span class="sc">~</span> <span class="st">"Chondral</span><span class="sc">\n</span><span class="st"> Pathology"</span>,</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"InjuryPres"</span> <span class="sc">~</span> <span class="st">"Injury to</span><span class="sc">\n</span><span class="st"> Presentation"</span>,</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"ActivityLevel"</span> <span class="sc">~</span> <span class="st">"Activity</span><span class="sc">\n</span><span class="st"> Level"</span>,</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"GeneralHealth"</span> <span class="sc">~</span> <span class="st">" General</span><span class="sc">\n</span><span class="st"> Health"</span>,</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"ServiceType"</span> <span class="sc">~</span> <span class="st">"Health Service</span><span class="sc">\n</span><span class="st"> Type"</span>,</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"CollectType"</span> <span class="sc">~</span> <span class="st">"Collection Service</span><span class="sc">\n</span><span class="st"> Type"</span>,</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"CollectMethod"</span> <span class="sc">~</span> <span class="st">"Method of</span><span class="sc">\n</span><span class="st"> Collection"</span>,</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> name</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>DagPlot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  tidy_dag1,</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x,</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> y,</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">xend =</span> xend,</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">yend =</span> yend)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_node</span>(</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"darkblue"</span>,</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_text</span>(</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> label</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="fl">0.5</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_edges</span>(</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">edge_color =</span> <span class="st">"gray50"</span>,</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">edge_width =</span> <span class="fl">0.5</span>,</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>    <span class="co">#edge_arrow_size = 0.3</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dag</span>(</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_size =</span> <span class="dv">12</span>,</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_family =</span> <span class="st">""</span>,</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>)</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">16</span>,</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>      <span class="dv">20</span>,</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>      <span class="dv">20</span>,</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>      <span class="dv">20</span>,</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>      <span class="dv">20</span></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">knit_print</span>(DagPlot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-dag" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dag-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="SHARKS_ACLRBase_SVR3_files/figure-html/fig-dag-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dag-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Directed acyclic graph of Sample -&gt; IKDC Baseline
</figcaption>
</figure>
</div>
</div>
</div>
<p>The DAG presented in <a href="#fig-dag" class="quarto-xref">Figure&nbsp;2</a> illustrates the high-dimensionality of the relevant variables with respect to baseline IKDC prior to ACL reconstruction. Further analysis to identify a minimum adjustment set may not be fully effective in this instance.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Figadjset <span class="ot">&lt;-</span> ggdag<span class="sc">::</span><span class="fu">ggdag_adjustment_set</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  tidy_dag1,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#use_labels = "label"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">"Sample"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">"IKDCBase"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_node</span>(</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"darkblue"</span>, </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"lightblue"</span>, </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.7</span>, </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_dag_text(</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   aes(label = label),  # Use the 'label' column directly</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   color = "black",</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   fontface = "bold",</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   size = 3,</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   vjust = -1.5,  # Adjust vertical position</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   hjust = 1.5,  # Adjust horizontal position</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   show.legend = FALSE  # Prevent text from appearing in legend</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_label_repel</span>(</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> label, <span class="at">fill =</span> adjusted),</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">box.padding =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"lines"</span>),  <span class="co"># Padding around labels</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">point.padding =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"lines"</span>),  <span class="co"># Padding around points</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="fl">0.5</span>,  <span class="co"># Adjust vertical nudge</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="fl">0.5</span>   <span class="co"># Adjust horizontal nudge</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_edges</span>(</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">edge_color =</span> <span class="st">"gray50"</span>, </span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">edge_width =</span> <span class="fl">0.5</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dag</span>(</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_size =</span> <span class="dv">10</span>,</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_family =</span> <span class="st">""</span>,</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>)</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="fl">0.5</span>, </span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">10</span>, </span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="st">"gray80"</span>),</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">knit_print</span>(Figadjset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-adjset" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-adjset-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="SHARKS_ACLRBase_SVR3_files/figure-html/fig-adjset-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-adjset-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Calculated minimum adjustment set for modelling Sample -&gt; IKDC at Baseline
</figcaption>
</figure>
</div>
</div>
</div>
<p>The final adjustment model identified with the DAG approach (<a href="#fig-adjset" class="quarto-xref">Figure&nbsp;3</a>) remains highly specified and will likely present a challenge with respect to developing a reasonable model, as well as collating a sufficient sample size for the purposes of prognostication and case adjustment. These variables will likely need to be prioritised further during protocol development.</p>
</section>
</section>
<section id="data-collection" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="data-collection"><span class="header-section-number">6.4</span> Data Collection</h2>
<div class="cell" data-layout-align="default">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>flowchart TD</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    subgraph S1 ["Literature-Based Analysis"]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        A[Literature Review] --&gt; B[Data Extraction]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        B --&gt; C[Simulation]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        A -.-&gt; A1["Search databases&lt;br/&gt;Screen articles&lt;br/&gt;Apply inclusion criteria"]</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        B -.-&gt; B1["Extract key parameters&lt;br/&gt;Standardize data formats&lt;br/&gt;Quality assessment"]</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        C -.-&gt; C1["Model development&lt;br/&gt;Parameter estimation&lt;br/&gt;Scenario analysis"]</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    subgraph S2 ["Registry-Based Analysis"]</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        D[Cohort Retrieval] --&gt; E[Chart Review]</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        D -.-&gt; D1["Query clinical registry&lt;br/&gt;Apply selection criteria&lt;br/&gt;Export patient data"]</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>        E -.-&gt; E1["Manual chart review&lt;br/&gt;Data validation&lt;br/&gt;Clinical assessment"]</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    style A1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    style B1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    style C1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    style D1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    style E1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    classDef litBox fill:#e6f3ff,stroke:#4682b4,stroke-width:2px</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    classDef regBox fill:#fffacd,stroke:#daa520,stroke-width:2px</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    class A,B,C litBox</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    class D,E regBox</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-datacollection" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-datacollection-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-datacollection">flowchart TD
    subgraph S1 ["Literature-Based Analysis"]
        A[Literature Review] --&gt; B[Data Extraction]
        B --&gt; C[Simulation]
        
        A -.-&gt; A1["Search databases&lt;br/&gt;Screen articles&lt;br/&gt;Apply inclusion criteria"]
        B -.-&gt; B1["Extract key parameters&lt;br/&gt;Standardize data formats&lt;br/&gt;Quality assessment"]
        C -.-&gt; C1["Model development&lt;br/&gt;Parameter estimation&lt;br/&gt;Scenario analysis"]
    end
    
    subgraph S2 ["Registry-Based Analysis"]
        D[Cohort Retrieval] --&gt; E[Chart Review]
        
        D -.-&gt; D1["Query clinical registry&lt;br/&gt;Apply selection criteria&lt;br/&gt;Export patient data"]
        E -.-&gt; E1["Manual chart review&lt;br/&gt;Data validation&lt;br/&gt;Clinical assessment"]
    end
    
    style A1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5
    style B1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5
    style C1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5
    style D1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5
    style E1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5
    
    classDef litBox fill:#e6f3ff,stroke:#4682b4,stroke-width:2px
    classDef regBox fill:#fffacd,stroke:#daa520,stroke-width:2px
    
    class A,B,C litBox
    class D,E regBox

</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-datacollection-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Flowchart of data collection steps in proposed study
</figcaption>
</figure>
</div>
</div>
</div>
<p>The data collection for this study will be conducted over multiple lines of action as illustrated in <a href="#fig-datacollection" class="quarto-xref">Figure&nbsp;4</a>;</p>
<ol type="1">
<li><p>Literature retrieval and data extraction</p>
<ol type="1">
<li>Filtering for <em>comparable</em> studies to the local dataset based on population characteristics, healthcare setting and data-generation mechanisms.</li>
</ol></li>
<li><p>Chart review of relevant cases in SHARKS registry</p>
<ol type="1">
<li><p>An initial list derived from SHARKS registry, shared with hospital collaborator. Includes form links to standardised input for comorbidities and other inputs</p></li>
<li><p>Chart review with feedback on each record for inclusion/exclusion variables</p></li>
<li><p>Matching and processing to produce a refined list for data retrieval on <em>included</em> records only</p></li>
</ol></li>
<li><p>Data simulation based on parameters retrieved from relevant literature</p>
<ol type="1">
<li><p>Distribution parameters of outcome data (IKDC) and sample characteristics as per <a href="#fig-adjset" class="quarto-xref">Figure&nbsp;3</a>.</p></li>
<li><p>Covariance parameters retrieved from related studies detailing total effects of each parameter on baseline IKDC.</p></li>
</ol></li>
</ol>
</section>
</section>
<section id="methods---analysis" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Methods - Analysis</h1>
<p>Now that we have some sources to work with, for the purposes of this planning document it is now possible to walk through a simulated analysis to illustrate how the study will look. The first step is to define the literature characteristics to take these into account in the case-mixture adjustment when comparing our local data to the broader knowledge. For the purposes of this illustration, the following characteristics have been included;</p>
<div id="tbl-sim-prep" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-sim-prep-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;6: Region and study characteristics incorporated into analysis simulation
</figcaption>
<div aria-describedby="tbl-sim-prep-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 31%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Characteristic</th>
<th>Responses</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Study type</td>
<td><p>Randomised controlled trial</p>
<p>Registry</p>
<p>Uncontrolled cohort or case series</p></td>
<td></td>
</tr>
<tr class="even">
<td>Effect of selection bias</td>
<td>0; -1; -2</td>
<td>The least biased with respect to patient selection would be national registry</td>
</tr>
<tr class="odd">
<td>Measurement precision</td>
<td>0.8; 0.9; 0.7</td>
<td>Large-scale registry most precise</td>
</tr>
<tr class="even">
<td>Missing date rate</td>
<td>0.05; 0.15; 0.20</td>
<td>RCT generally has lowest missing data rate</td>
</tr>
<tr class="odd">
<td>Capture method</td>
<td>Electronic; Paper</td>
<td>Expect a roughly even split across studies and regions</td>
</tr>
<tr class="even">
<td>Variance due to measurement error</td>
<td>2; 4</td>
<td>Expect electronic to be more precise for the purposes of the simulation</td>
</tr>
<tr class="odd">
<td>Health setting</td>
<td><p>Academic_Medical_Center; Community_Hospital; Specialty_Clinic;</p>
<p>Primary_Care</p></td>
<td>This will need refinement during literature extraction</td>
</tr>
<tr class="even">
<td>Resources available to patient prior to surgical review</td>
<td>4, 2, 3, 1</td>
<td>This is more related to socioeconomic status of country_region</td>
</tr>
<tr class="odd">
<td>Case complexity</td>
<td>65, 50, 35, 20</td>
<td>Severity of functional deficit at the time of review</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2065</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: DEFINE STUDY CHARACTERISTICS AND DATA GENERATING MECHANISMS</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define study types and their characteristics (from draft 2)</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>study_types <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">study_type =</span> <span class="fu">c</span>(<span class="st">"RCT"</span>, <span class="st">"Registry"</span>, <span class="st">"Observational_Cohort"</span>),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">selection_bias_effect =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>),  <span class="co"># RCT least biased</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">measurement_precision =</span> <span class="fu">c</span>(<span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="fl">0.7</span>),  <span class="co"># Registry most precise</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">missing_data_rate =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.15</span>, <span class="fl">0.20</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Define data capture methods</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>capture_methods <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">capture_method =</span> <span class="fu">c</span>(<span class="st">"Electronic"</span>, <span class="st">"Paper"</span>),</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">measurement_error_sd =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>),  <span class="co"># Electronic more precise</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">processing_delay_bias =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Define healthcare setting types</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>setting_types <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">setting_type =</span> <span class="fu">c</span>(<span class="st">"Academic_Medical_Center"</span>, <span class="st">"Community_Hospital"</span>, </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Specialty_Clinic"</span>, <span class="st">"Primary_Care"</span>),</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">resource_avail =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>),  <span class="co"># 1=low, 4=high resources</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">case_complexity_mean =</span> <span class="fu">c</span>(<span class="dv">65</span>, <span class="dv">50</span>, <span class="dv">35</span>, <span class="dv">20</span>),  <span class="co"># baseline severity</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">staff_training_effect =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We’ll use a simulation package to create a hierarchical dataset with the following structure</p>
<p>Region - highest level</p>
<p>Study - nested within region; contains study characteristics</p>
<p>Patient - nested within study and region; contains patient-level characteristics</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Define Region-level variation (affects baseline IKDC across regions)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>gen.region <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"RegionEffect"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="dv">0</span>,        <span class="co"># Overall mean effect</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="dv">8</span>,       <span class="co"># Between-region variance for IKDC</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="st">"idRegion"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>gen.region <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  gen.region,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"nStudy"</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"noZeroPoisson"</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="dv">4</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Add regional preferences for study types and settings</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>gen.region <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  gen.region,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"region_academic_preference"</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="dv">0</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="fl">0.25</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>gen.region <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  gen.region,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"region_electronic_adoption"</span>,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>, </span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="fl">0.4</span>,  <span class="co"># Base 70% electronic adoption</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="fl">0.06</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate regions</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>dtRegion <span class="ot">&lt;-</span> <span class="fu">genData</span>(<span class="dv">8</span>, gen.region) <span class="sc">|&gt;</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">region_electronic_adoption =</span> <span class="fu">pmax</span>(<span class="fl">0.25</span>, <span class="fu">pmin</span>(<span class="fl">0.8</span>, region_electronic_adoption))</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now that the region characteristics have been defined, the study characteristics can be defined, including an effect of study on variation in baseline IKDC, the sample size and regional variation on the proportion of male cases within the study sample.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Define Study-level variation within regions</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>gen.study <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"StudyEffect"</span>, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>, </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="dv">0</span>,        <span class="co"># Mean study effect within region</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="dv">2</span>        <span class="co"># Between-study variance within region</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>gen.study <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  gen.study,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"nSample"</span>, </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"noZeroPoisson"</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="dv">150</span>       <span class="co"># Sample size per study</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Add study design characteristics</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>gen.study <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  gen.study,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"study_type_prob"</span>,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"uniform"</span>,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"0;1"</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>gen.study <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  gen.study,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"setting_type_prob"</span>, </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"uniform"</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"0;1"</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Add regional variation in covariate distributions (from draft 1)</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>gen.study <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  gen.study,</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"RegionMaleRate"</span>,</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>,</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"0.69 + 0.15 * RegionEffect/5"</span>,  <span class="co"># Regional variation in male proportion</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="fl">0.01</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>gen.study <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  gen.study,</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"RegionAgeShift"</span>,</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>, </span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"RegionEffect * 0.5"</span>,  <span class="co"># Regional age variation</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="dv">1</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>gen.study <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  gen.study,</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"idPatient"</span>,</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"uniform"</span>, </span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"1;40"</span>  <span class="co"># number of patients per study</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate studies within regions</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>dtStudy <span class="ot">&lt;-</span> <span class="fu">genCluster</span>(dtRegion, <span class="st">"idRegion"</span>, <span class="at">numIndsVar =</span> <span class="st">"nStudy"</span>, <span class="at">level1ID =</span> <span class="st">"idStudy"</span>)</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>dtStudy <span class="ot">&lt;-</span> <span class="fu">addColumns</span>(gen.study, dtStudy)</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign study characteristics based on probabilities</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>dtStudy <span class="ot">&lt;-</span> dtStudy <span class="sc">|&gt;</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">RegionMaleRate =</span> <span class="fu">pmax</span>(<span class="fl">0.4</span>, <span class="fu">pmin</span>(<span class="fl">0.8</span>, RegionMaleRate)),</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Assign study type</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">study_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>      study_type_prob <span class="sc">&lt;</span> <span class="fl">0.3</span> <span class="sc">~</span> <span class="st">"RCT"</span>,</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>      study_type_prob <span class="sc">&lt;</span> <span class="fl">0.6</span> <span class="sc">~</span> <span class="st">"Registry"</span>, </span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Observational_Cohort"</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Assign setting type (academic centers more likely in regions with positive effects)</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">setting_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>      setting_type_prob <span class="sc">&lt;</span> (<span class="fl">0.2</span> <span class="sc">+</span> <span class="fl">0.1</span> <span class="sc">*</span> <span class="fu">pmax</span>(<span class="dv">0</span>, RegionEffect<span class="sc">/</span><span class="dv">5</span>)) <span class="sc">~</span> <span class="st">"Academic_Medical_Center"</span>,</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>      setting_type_prob <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">~</span> <span class="st">"Specialty_Clinic"</span>,</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>      setting_type_prob <span class="sc">&lt;</span> <span class="fl">0.8</span> <span class="sc">~</span> <span class="st">"Community_Hospital"</span>,</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Primary_Care"</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Assign capture method based on regional adoption</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">capture_method =</span> <span class="fu">ifelse</span>(</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>      <span class="fu">runif</span>(<span class="fu">n</span>()) <span class="sc">&lt;</span> region_electronic_adoption, </span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Electronic"</span>, </span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Paper"</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Join with study characteristics</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(study_types, <span class="at">by =</span> <span class="st">"study_type"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(setting_types, <span class="at">by =</span> <span class="st">"setting_type"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(capture_methods, <span class="at">by =</span> <span class="st">"capture_method"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We then move to estimating patient characteristics based on the hierarchical data structure, with patient age, sex proportions and the incidence of meniscus or cartilage pathology all varying by region. In addition, socioeconomic status, education level and comorbidity burden have been incorporated into the simulation. These have been included for illustration purposes as these are typically not reported in the literature for ACL injury and reconstruction.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Define Patient-level covariates using SHARKS approach with study effects</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"age_offset"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"gamma"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"log(27.3 - 16 + RegionAgeShift)"</span>,  <span class="co"># Regional age variation</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="st">"(5.5^2) / (27.3 - 16)^2"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"log"</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"Age"</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"age_offset + 16"</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"nonrandom"</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Gender with study-specific selection effects</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"Male"</span>,</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"binary"</span>,</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"RegionMaleRate + 0.1 * (study_type == 'RCT')"</span>,  <span class="co"># RCTs may have different gender balance</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"logit"</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"bmi_scale"</span>,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"log(26 + 0.15 * (Age - 25) + 3 * Male + 0.1 * RegionEffect)"</span>,</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="fl">0.04</span>,</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"gamma"</span>,</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"log"</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"BMI"</span>,</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"pmax(pmin(bmi_scale, 40), 18)"</span>,</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"nonrandom"</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"MeniscusCartilage"</span>,</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"-1.5 + 0.02 * Age + 0.04 * Male + 0.06 * BMI + 0.05 * RegionEffect"</span>,</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"binary"</span>,</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"logit"</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Add socioeconomic variables (from draft 2 approach)</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"ses_score"</span>,</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>,</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"50 + 5 * (setting_type == 'Academic_Medical_Center') + 2 * RegionEffect"</span>,</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="dv">100</span></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"education_years"</span>,</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>,</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"14 + 0.02 * ses_score + (setting_type == 'Academic_Medical_Center')"</span>,</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="dv">9</span></span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"comorbidity_count"</span>,</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"poisson"</span>,</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"log(2 + 0.5 * (setting_type == 'Academic_Medical_Center') + 0.02 * Age)"</span></span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now that we have the independent variables defined, we can generate a varying IKDC score that is clustered to regions and studies.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a> <span class="co">#Step 5: Define IKDC with hierarchical structure and study methodology effects</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"ikdc_base"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"log(72 - 0.25 * Age + 4 * Male - 0.4 * BMI - 12 * MeniscusCartilage + 0.1 * ses_score - 2 * comorbidity_count)"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="fl">0.06</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"gamma"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"log"</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Add study methodology effects to IKDC</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"IKDC_raw"</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"ikdc_base + RegionEffect + StudyEffect + selection_bias_effect + staff_training_effect"</span>,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"nonrandom"</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Add measurement error based on capture method</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"measurement_error"</span>,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>,</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"0"</span>,</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="st">"measurement_error_sd^2"</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>gen.patient <span class="ot">&lt;-</span> <span class="fu">defDataAdd</span>(</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  gen.patient,</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"IKDC"</span>,</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"pmax(pmin(IKDC_raw + measurement_error + processing_delay_bias, 100), 0)"</span>,</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"nonrandom"</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate patients within studies</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>dtPatient <span class="ot">&lt;-</span> <span class="fu">genCluster</span>(</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>  dtStudy, </span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">cLevelVar =</span> <span class="st">"idStudy"</span>,</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">numIndsVar =</span> <span class="st">"nSample"</span>,</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">level1ID =</span> <span class="st">"idPatient"</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>dtPatient1 <span class="ot">&lt;-</span> <span class="fu">addColumns</span>(gen.patient, dtPatient)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The literature dataset is now in place - we can move to a separate dataset to represent the local SHARKS dataset. Then the study characteristics are added to enable combination with the literature dataset for further analysis.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Add the local SHARKS dataset with known characteristics</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"age_offset"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"gamma"</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"log(27.3 - 16)"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> (<span class="fl">7.8</span><span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> (<span class="fl">27.3</span> <span class="sc">-</span> <span class="dv">16</span>)<span class="sc">^</span><span class="dv">2</span>, </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"log"</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"Age"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"age_offset + 16"</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"nonrandom"</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  SHARKSDef, </span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"Male"</span>, </span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"binary"</span>,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="fl">0.69</span>, </span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"logit"</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"bmi_scale"</span>,</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"log(26 + 0.15 * (Age - 25) + 3 * Male)"</span>,</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="fl">0.04</span>,</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"gamma"</span>,</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"log"</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"BMI"</span>,</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"pmax(pmin(bmi_scale, 40), 18)"</span>,</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"nonrandom"</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"MeniscusCartilage"</span>,</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"-1.5 + 0.02 * Age + 0.04 * Male + 0.06 * BMI"</span>,</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"binary"</span>,</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"logit"</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Add socioeconomic variables for local data</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"ses_score"</span>,</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>,</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="dv">52</span>,  <span class="co"># Slightly above average for your setting</span></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="dv">80</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"education_years"</span>, </span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"normal"</span>,</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="dv">15</span>,  <span class="co"># Higher education in your population</span></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="dv">6</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"comorbidity_count"</span>,</span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"poisson"</span>,</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"log(3.2 + 0.02 * Age)"</span>  <span class="co"># Higher comorbidity</span></span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"ikdc_scale"</span>,</span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"log(72 - 0.25 * Age + 4 * Male - 0.4 * BMI - 12 * MeniscusCartilage + 0.1 * ses_score - 2 * comorbidity_count)"</span>,</span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a>  <span class="at">variance =</span> <span class="fl">0.12</span>,</span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"gamma"</span>,</span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">link =</span> <span class="st">"log"</span></span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a>SHARKSDef <span class="ot">&lt;-</span> <span class="fu">defData</span>(</span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a>  SHARKSDef,</span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a>  <span class="at">varname =</span> <span class="st">"IKDC"</span>,</span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="st">"pmax(pmin(ikdc_scale, 100), 0)"</span>,</span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a>  <span class="at">dist =</span> <span class="st">"nonrandom"</span></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate local SHARKS data</span></span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a>SHARKSData <span class="ot">&lt;-</span> <span class="fu">genData</span>(<span class="at">n =</span> <span class="dv">500</span>, SHARKSDef)</span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a><span class="co"># Add study characteristics for local data</span></span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a>SHARKSLocal <span class="ot">&lt;-</span> SHARKSData <span class="sc">|&gt;</span></span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">idRegion =</span> <span class="dv">1</span>,</span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">idStudy =</span> <span class="dv">0</span>,</span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">idPatient =</span> <span class="fu">row_number</span>() <span class="sc">+</span> <span class="fu">max</span>(dtPatient<span class="sc">$</span>idPatient),</span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">RegionEffect =</span> <span class="dv">0</span>,</span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">StudyEffect =</span> <span class="dv">0</span>,</span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">RegionMaleRate =</span> <span class="fl">0.69</span>,</span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">RegionAgeShift =</span> <span class="dv">0</span>,</span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">nStudy =</span> <span class="cn">NA</span>,</span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">nSample =</span> <span class="cn">NA</span>,</span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Local study characteristics</span></span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">study_type =</span> <span class="st">"Observational_Cohort"</span>,</span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">setting_type =</span> <span class="st">"Community_Hospital"</span>,  <span class="co"># Adjust as appropriate</span></span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">capture_method =</span> <span class="st">"Electronic"</span>,</span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">selection_bias_effect =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">measurement_precision =</span> <span class="fl">0.7</span>,</span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_data_rate =</span> <span class="fl">0.20</span>,</span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">resource_avail =</span> <span class="dv">2</span>,</span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">case_complexity_mean =</span> <span class="dv">50</span>,</span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">staff_training_effect =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">measurement_error_sd =</span> <span class="dv">2</span>,</span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">processing_delay_bias =</span> <span class="dv">0</span>,</span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Intermediate variables</span></span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_offset =</span> <span class="cn">NA</span>,</span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">bmi_scale =</span> <span class="cn">NA</span>,</span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">ikdc_base =</span> <span class="cn">NA</span>,</span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">ikdc_scale =</span> IKDC,</span>
<span id="cb10-121"><a href="#cb10-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">IKDC_raw =</span> IKDC,</span>
<span id="cb10-122"><a href="#cb10-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">measurement_error =</span> <span class="dv">0</span>,</span>
<span id="cb10-123"><a href="#cb10-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">region_academic_preference =</span> <span class="dv">0</span>,</span>
<span id="cb10-124"><a href="#cb10-124" aria-hidden="true" tabindex="-1"></a>    <span class="at">region_electronic_adoption =</span> <span class="dv">1</span>,</span>
<span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">study_type_prob =</span> <span class="cn">NA</span>,</span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">setting_type_prob =</span> <span class="cn">NA</span></span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We now combine the datasets and make some final adjustments to enable application of regression methods for a hierarchical model construction to underpin the case-mixture adjustment.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 7: Combine datasets</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>dtCombined <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  dtPatient1,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  SHARKSLocal</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">DataSource =</span> <span class="fu">ifelse</span>(idStudy <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Local_SHARKS"</span>, <span class="st">"Literature"</span>),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">idRegion =</span> <span class="fu">as.factor</span>(idRegion),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">study_type =</span> <span class="fu">factor</span>(study_type),</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">setting_type =</span> <span class="fu">factor</span>(setting_type),</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">capture_method =</span> <span class="fu">factor</span>(capture_method)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create analysis dataset with proper factors and centering</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>dtAnalysis <span class="ot">&lt;-</span> dtCombined <span class="sc">|&gt;</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Center continuous variables</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Age_c =</span> <span class="fu">scale</span>(Age, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">FALSE</span>)[,<span class="dv">1</span>],</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">BMI_c =</span> <span class="fu">scale</span>(BMI, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">FALSE</span>)[,<span class="dv">1</span>],</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">ses_score_c =</span> <span class="fu">scale</span>(ses_score, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">FALSE</span>)[,<span class="dv">1</span>],</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">education_years_c =</span> <span class="fu">scale</span>(education_years, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">FALSE</span>)[,<span class="dv">1</span>],</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create factor versions</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">idRegion_f =</span> <span class="fu">as.factor</span>(idRegion),</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">idStudy_f =</span> <span class="fu">as.factor</span>(idStudy),</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sex_f =</span> <span class="fu">factor</span>(Male, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>)),</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">MeniscusCartilage_f =</span> <span class="fu">factor</span>(MeniscusCartilage, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), </span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>                                <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>)),</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">DataSource_f =</span> <span class="fu">factor</span>(DataSource, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Local_SHARKS"</span>, <span class="st">"Literature"</span>)),</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_local =</span> <span class="fu">ifelse</span>(DataSource <span class="sc">==</span> <span class="st">"Local_SHARKS"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="visualisation" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="visualisation"><span class="header-section-number">7.1</span> Visualisation</h2>
<p>Let’s have a look at the dataset in table and plot forms so we can understand the data structure a bit better. Let’s have a look at the variation in IKDC by region.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>FigSimIKDC <span class="ot">&lt;-</span> dtAnalysis <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> idRegion_f, <span class="at">x =</span> IKDC)) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_halfeye</span>()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">knit_print</span>(FigSimIKDC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-sim-IKDC" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sim-IKDC-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="SHARKS_ACLRBase_SVR3_files/figure-html/fig-sim-IKDC-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sim-IKDC-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Distribution of simulated IKDC at baseline assessment across multiple regions. Region 0 is the local dataset
</figcaption>
</figure>
</div>
</div>
</div>
<p>Now let’s summarise simply using a table to have a look at all of the different characteristics. Keep in mind, the capture method for SHARKS is actually split between electronic and paper.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create comprehensive summary table</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>summary_table <span class="ot">&lt;-</span> dtAnalysis <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(DataSource, study_type, setting_type, capture_method, </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>         IKDC, Age, Sex_f, BMI, MeniscusCartilage_f, </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>         comorbidity_count, ses_score, education_years) <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> DataSource,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span> <span class="fu">list</span>(</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">"{mean} ({sd})"</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all_categorical</span>() <span class="sc">~</span> <span class="st">"{n} ({p}%)"</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">list</span>(</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>      IKDC <span class="sc">~</span> <span class="st">"IKDC Score"</span>,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>      Age <span class="sc">~</span> <span class="st">"Age (years)"</span>,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>      Sex_f <span class="sc">~</span> <span class="st">"Sex"</span>,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>      BMI <span class="sc">~</span> <span class="st">"BMI (kg/m²)"</span>,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>      MeniscusCartilage_f <span class="sc">~</span> <span class="st">"Meniscus/Cartilage Pathology"</span>,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>      comorbidity_count <span class="sc">~</span> <span class="st">"Comorbidity Count"</span>,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>      ses_score <span class="sc">~</span> <span class="st">"SES Score"</span>,</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>      education_years <span class="sc">~</span> <span class="st">"Education (years)"</span>,</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>      study_type <span class="sc">~</span> <span class="st">"Study Type"</span>,</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>      setting_type <span class="sc">~</span> <span class="st">"Setting Type"</span>,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>      capture_method <span class="sc">~</span> <span class="st">"Capture Method"</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_overall</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_header</span>(label <span class="sc">~</span> <span class="st">"**Variable**"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">"**Study Characteristics by Dataset**"</span>)</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">knit_print</span>(summary_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-summary" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;7: Summary of simulated study and patient characteristics between literature and SHARKS dataset
</figcaption>
<div aria-describedby="tbl-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="dhbxjspvyg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dhbxjspvyg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dhbxjspvyg thead, #dhbxjspvyg tbody, #dhbxjspvyg tfoot, #dhbxjspvyg tr, #dhbxjspvyg td, #dhbxjspvyg th {
  border-style: none;
}

#dhbxjspvyg p {
  margin: 0;
  padding: 0;
}

#dhbxjspvyg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dhbxjspvyg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dhbxjspvyg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dhbxjspvyg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dhbxjspvyg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dhbxjspvyg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dhbxjspvyg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dhbxjspvyg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dhbxjspvyg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dhbxjspvyg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dhbxjspvyg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dhbxjspvyg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dhbxjspvyg .gt_spanner_row {
  border-bottom-style: hidden;
}

#dhbxjspvyg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dhbxjspvyg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dhbxjspvyg .gt_from_md > :first-child {
  margin-top: 0;
}

#dhbxjspvyg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dhbxjspvyg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dhbxjspvyg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dhbxjspvyg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dhbxjspvyg .gt_row_group_first td {
  border-top-width: 2px;
}

#dhbxjspvyg .gt_row_group_first th {
  border-top-width: 2px;
}

#dhbxjspvyg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dhbxjspvyg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dhbxjspvyg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dhbxjspvyg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dhbxjspvyg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dhbxjspvyg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dhbxjspvyg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dhbxjspvyg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dhbxjspvyg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dhbxjspvyg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dhbxjspvyg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dhbxjspvyg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dhbxjspvyg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dhbxjspvyg .gt_left {
  text-align: left;
}

#dhbxjspvyg .gt_center {
  text-align: center;
}

#dhbxjspvyg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dhbxjspvyg .gt_font_normal {
  font-weight: normal;
}

#dhbxjspvyg .gt_font_bold {
  font-weight: bold;
}

#dhbxjspvyg .gt_font_italic {
  font-style: italic;
}

#dhbxjspvyg .gt_super {
  font-size: 65%;
}

#dhbxjspvyg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dhbxjspvyg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dhbxjspvyg .gt_indent_1 {
  text-indent: 5px;
}

#dhbxjspvyg .gt_indent_2 {
  text-indent: 10px;
}

#dhbxjspvyg .gt_indent_3 {
  text-indent: 15px;
}

#dhbxjspvyg .gt_indent_4 {
  text-indent: 20px;
}

#dhbxjspvyg .gt_indent_5 {
  text-indent: 25px;
}

#dhbxjspvyg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#dhbxjspvyg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption><strong>Study Characteristics by Dataset</strong></caption>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header gt_col_headings">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Variable</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Overall</strong><br>
N = 6,605<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_1" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Literature</strong><br>
N = 6,105<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
<th id="stat_2" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>Local_SHARKS</strong><br>
N = 500<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Study Type</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Observational_Cohort</td>
<td class="gt_row gt_center" headers="stat_0">3,127 (47%)</td>
<td class="gt_row gt_center" headers="stat_1">2,627 (43%)</td>
<td class="gt_row gt_center" headers="stat_2">500 (100%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;RCT</td>
<td class="gt_row gt_center" headers="stat_0">1,633 (25%)</td>
<td class="gt_row gt_center" headers="stat_1">1,633 (27%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Registry</td>
<td class="gt_row gt_center" headers="stat_0">1,845 (28%)</td>
<td class="gt_row gt_center" headers="stat_1">1,845 (30%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Setting Type</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Academic_Medical_Center</td>
<td class="gt_row gt_center" headers="stat_0">598 (9.1%)</td>
<td class="gt_row gt_center" headers="stat_1">598 (9.8%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Community_Hospital</td>
<td class="gt_row gt_center" headers="stat_0">2,512 (38%)</td>
<td class="gt_row gt_center" headers="stat_1">2,012 (33%)</td>
<td class="gt_row gt_center" headers="stat_2">500 (100%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Primary_Care</td>
<td class="gt_row gt_center" headers="stat_0">1,792 (27%)</td>
<td class="gt_row gt_center" headers="stat_1">1,792 (29%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Specialty_Clinic</td>
<td class="gt_row gt_center" headers="stat_0">1,703 (26%)</td>
<td class="gt_row gt_center" headers="stat_1">1,703 (28%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Capture Method</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Electronic</td>
<td class="gt_row gt_center" headers="stat_0">4,044 (61%)</td>
<td class="gt_row gt_center" headers="stat_1">3,544 (58%)</td>
<td class="gt_row gt_center" headers="stat_2">500 (100%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Paper</td>
<td class="gt_row gt_center" headers="stat_0">2,561 (39%)</td>
<td class="gt_row gt_center" headers="stat_1">2,561 (42%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">IKDC Score</td>
<td class="gt_row gt_center" headers="stat_0">49.08 (15.31)</td>
<td class="gt_row gt_center" headers="stat_1">48.92 (14.98)</td>
<td class="gt_row gt_center" headers="stat_2">51.03 (18.80)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Age (years)</td>
<td class="gt_row gt_center" headers="stat_0">26.88 (5.57)</td>
<td class="gt_row gt_center" headers="stat_1">26.85 (5.36)</td>
<td class="gt_row gt_center" headers="stat_2">27.27 (7.66)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Sex</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Female</td>
<td class="gt_row gt_center" headers="stat_0">2,176 (33%)</td>
<td class="gt_row gt_center" headers="stat_1">2,012 (33%)</td>
<td class="gt_row gt_center" headers="stat_2">164 (33%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Male</td>
<td class="gt_row gt_center" headers="stat_0">4,429 (67%)</td>
<td class="gt_row gt_center" headers="stat_1">4,093 (67%)</td>
<td class="gt_row gt_center" headers="stat_2">336 (67%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">BMI (kg/m²)</td>
<td class="gt_row gt_center" headers="stat_0">28.12 (5.55)</td>
<td class="gt_row gt_center" headers="stat_1">28.11 (5.58)</td>
<td class="gt_row gt_center" headers="stat_2">28.33 (5.16)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Meniscus/Cartilage Pathology</td>
<td class="gt_row gt_center" headers="stat_0">4,377 (66%)</td>
<td class="gt_row gt_center" headers="stat_1">4,024 (66%)</td>
<td class="gt_row gt_center" headers="stat_2">353 (71%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Comorbidity Count</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
<td class="gt_row gt_center" headers="stat_1"><br>
</td>
<td class="gt_row gt_center" headers="stat_2"><br>
</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;0</td>
<td class="gt_row gt_center" headers="stat_0">2,560 (39%)</td>
<td class="gt_row gt_center" headers="stat_1">2,415 (40%)</td>
<td class="gt_row gt_center" headers="stat_2">145 (29%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;1</td>
<td class="gt_row gt_center" headers="stat_0">2,449 (37%)</td>
<td class="gt_row gt_center" headers="stat_1">2,270 (37%)</td>
<td class="gt_row gt_center" headers="stat_2">179 (36%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;2</td>
<td class="gt_row gt_center" headers="stat_0">1,103 (17%)</td>
<td class="gt_row gt_center" headers="stat_1">1,000 (16%)</td>
<td class="gt_row gt_center" headers="stat_2">103 (21%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;3</td>
<td class="gt_row gt_center" headers="stat_0">379 (5.7%)</td>
<td class="gt_row gt_center" headers="stat_1">325 (5.3%)</td>
<td class="gt_row gt_center" headers="stat_2">54 (11%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;4</td>
<td class="gt_row gt_center" headers="stat_0">100 (1.5%)</td>
<td class="gt_row gt_center" headers="stat_1">83 (1.4%)</td>
<td class="gt_row gt_center" headers="stat_2">17 (3.4%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;5</td>
<td class="gt_row gt_center" headers="stat_0">9 (0.1%)</td>
<td class="gt_row gt_center" headers="stat_1">8 (0.1%)</td>
<td class="gt_row gt_center" headers="stat_2">1 (0.2%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;6</td>
<td class="gt_row gt_center" headers="stat_0">4 (&lt;0.1%)</td>
<td class="gt_row gt_center" headers="stat_1">4 (&lt;0.1%)</td>
<td class="gt_row gt_center" headers="stat_2">0 (0%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;8</td>
<td class="gt_row gt_center" headers="stat_0">1 (&lt;0.1%)</td>
<td class="gt_row gt_center" headers="stat_1">0 (0%)</td>
<td class="gt_row gt_center" headers="stat_2">1 (0.2%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">SES Score</td>
<td class="gt_row gt_center" headers="stat_0">48.74 (10.10)</td>
<td class="gt_row gt_center" headers="stat_1">48.48 (10.16)</td>
<td class="gt_row gt_center" headers="stat_2">51.86 (8.79)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Education (years)</td>
<td class="gt_row gt_center" headers="stat_0">15.09 (2.94)</td>
<td class="gt_row gt_center" headers="stat_1">15.10 (2.98)</td>
<td class="gt_row gt_center" headers="stat_2">14.96 (2.45)</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> n (%); Mean (SD)</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="case-mixture-adjustment" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="case-mixture-adjustment"><span class="header-section-number">7.2</span> Case-mixture adjustment</h2>
<p>Now we have a dataset to work with, we can work on constructing a case-mixture adjustment model. For this step we will draw partly on the review works of <span class="citation" data-cites="burgess2019">(<a href="#ref-burgess2019" role="doc-biblioref">Burgess et al. 2019</a>)</span> and <span class="citation" data-cites="sibert2021">(<a href="#ref-sibert2021" role="doc-biblioref">Sibert et al. 2021</a>)</span>. They describe considerable variability in the construction of adjustment models in the context of patient-reported outcomes and specifically within the musculoskeletal setting. In reality, this simulated model will be unlikely to be replicated, as there is unlikely to be sufficient description or reporting of some of the sample characteristics. Nevertheless, the simulation helps to illustrate key analytical choices to produce a reasonable adjustment based on the available information.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Case-Mix Adjustment for IKDC Scores using Mixed Effects Models</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Based on Silbert et al. review - implementing indirect standardization</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Fit hierarchical mixed effects model</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># This model accounts for clustering within studies and regions</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Following indirect standardization approach from the review</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Full mixed effects model with random effects for region and study</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>ikdc_model <span class="ot">&lt;-</span> lme4<span class="sc">::</span><span class="fu">lmer</span>(</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  IKDC <span class="sc">~</span> </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fixed effects - patient case-mix variables</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    Age_c <span class="sc">+</span> </span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">I</span>(Age_c<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span>  <span class="co"># Age squared for non-linear relationship</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    Sex_f <span class="sc">+</span> </span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    BMI_c <span class="sc">+</span> </span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    MeniscusCartilage_f <span class="sc">+</span> </span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    comorbidity_count <span class="sc">+</span> </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    ses_score_c <span class="sc">+</span> </span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    education_years_c <span class="sc">+</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Study methodology variables</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    study_type <span class="sc">+</span> </span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    setting_type <span class="sc">+</span> </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    capture_method <span class="sc">+</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Random effects for clustering</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> idRegion_f) <span class="sc">+</span> </span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span> <span class="sc">|</span> idStudy_f),</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dtAnalysis,</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">REML =</span> <span class="cn">TRUE</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Case-mix model table</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>model_table <span class="ot">&lt;-</span> ikdc_model <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">list</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>      Age_c <span class="sc">~</span> <span class="st">"Age (centered)"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>      Sex_f <span class="sc">~</span> <span class="st">"Sex (Female vs Male)"</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>      BMI_c <span class="sc">~</span> <span class="st">"BMI (centered)"</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>      MeniscusCartilage_f <span class="sc">~</span> <span class="st">"Meniscus/Cartilage Pathology"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>      comorbidity_count <span class="sc">~</span> <span class="st">"Comorbidity Count"</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>      ses_score_c <span class="sc">~</span> <span class="st">"SES Score (centered)"</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>      education_years_c <span class="sc">~</span> <span class="st">"Education Years (centered)"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>      study_type <span class="sc">~</span> <span class="st">"Study Type"</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>      setting_type <span class="sc">~</span> <span class="st">"Setting Type"</span>,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>      capture_method <span class="sc">~</span> <span class="st">"Capture Method (Elec vs Paper)"</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">tidy_fun =</span> broom.mixed<span class="sc">::</span>tidy,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">exponentiate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_single_row =</span> <span class="fu">c</span>(</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>      Sex_f,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>      MeniscusCartilage_f,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>      capture_method</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_header</span>(label <span class="sc">~</span> <span class="st">"**Variable**"</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">"**Literature-Based Case-Mix Adjustment Model**"</span>)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">knit_print</span>(model_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="aajzrrcxii" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#aajzrrcxii table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#aajzrrcxii thead, #aajzrrcxii tbody, #aajzrrcxii tfoot, #aajzrrcxii tr, #aajzrrcxii td, #aajzrrcxii th {
  border-style: none;
}

#aajzrrcxii p {
  margin: 0;
  padding: 0;
}

#aajzrrcxii .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#aajzrrcxii .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#aajzrrcxii .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#aajzrrcxii .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#aajzrrcxii .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aajzrrcxii .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aajzrrcxii .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aajzrrcxii .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#aajzrrcxii .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#aajzrrcxii .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#aajzrrcxii .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#aajzrrcxii .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#aajzrrcxii .gt_spanner_row {
  border-bottom-style: hidden;
}

#aajzrrcxii .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#aajzrrcxii .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#aajzrrcxii .gt_from_md > :first-child {
  margin-top: 0;
}

#aajzrrcxii .gt_from_md > :last-child {
  margin-bottom: 0;
}

#aajzrrcxii .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#aajzrrcxii .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#aajzrrcxii .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#aajzrrcxii .gt_row_group_first td {
  border-top-width: 2px;
}

#aajzrrcxii .gt_row_group_first th {
  border-top-width: 2px;
}

#aajzrrcxii .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aajzrrcxii .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#aajzrrcxii .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#aajzrrcxii .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aajzrrcxii .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aajzrrcxii .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#aajzrrcxii .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#aajzrrcxii .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#aajzrrcxii .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aajzrrcxii .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aajzrrcxii .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aajzrrcxii .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aajzrrcxii .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aajzrrcxii .gt_left {
  text-align: left;
}

#aajzrrcxii .gt_center {
  text-align: center;
}

#aajzrrcxii .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#aajzrrcxii .gt_font_normal {
  font-weight: normal;
}

#aajzrrcxii .gt_font_bold {
  font-weight: bold;
}

#aajzrrcxii .gt_font_italic {
  font-style: italic;
}

#aajzrrcxii .gt_super {
  font-size: 65%;
}

#aajzrrcxii .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#aajzrrcxii .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#aajzrrcxii .gt_indent_1 {
  text-indent: 5px;
}

#aajzrrcxii .gt_indent_2 {
  text-indent: 10px;
}

#aajzrrcxii .gt_indent_3 {
  text-indent: 15px;
}

#aajzrrcxii .gt_indent_4 {
  text-indent: 20px;
}

#aajzrrcxii .gt_indent_5 {
  text-indent: 25px;
}

#aajzrrcxii .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#aajzrrcxii div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption><strong>Literature-Based Case-Mix Adjustment Model</strong></caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header gt_col_headings">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Variable</strong></th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>exp(Beta)</strong></th>
<th id="conf.low" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>95% CI</strong></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Age (centered)</td>
<td class="gt_row gt_center" headers="estimate">0.83</td>
<td class="gt_row gt_center" headers="conf.low">0.77, 0.89</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">I(Age_c^2)</td>
<td class="gt_row gt_center" headers="estimate">1.0</td>
<td class="gt_row gt_center" headers="conf.low">0.99, 1.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Sex (Female vs Male)</td>
<td class="gt_row gt_center" headers="estimate">46.0</td>
<td class="gt_row gt_center" headers="conf.low">22.4, 94.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">BMI (centered)</td>
<td class="gt_row gt_center" headers="estimate">0.66</td>
<td class="gt_row gt_center" headers="conf.low">0.62, 0.70</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Meniscus/Cartilage Pathology</td>
<td class="gt_row gt_center" headers="estimate">0.00</td>
<td class="gt_row gt_center" headers="conf.low">0.00, 0.00</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Comorbidity Count</td>
<td class="gt_row gt_center" headers="estimate">0.16</td>
<td class="gt_row gt_center" headers="conf.low">0.11, 0.22</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">SES Score (centered)</td>
<td class="gt_row gt_center" headers="estimate">1.11</td>
<td class="gt_row gt_center" headers="conf.low">1.08, 1.15</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Education Years (centered)</td>
<td class="gt_row gt_center" headers="estimate">1.01</td>
<td class="gt_row gt_center" headers="conf.low">0.90, 1.13</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Study Type</td>
<td class="gt_row gt_center" headers="estimate"><br>
</td>
<td class="gt_row gt_center" headers="conf.low"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Observational_Cohort</td>
<td class="gt_row gt_center" headers="estimate">—</td>
<td class="gt_row gt_center" headers="conf.low">—</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;RCT</td>
<td class="gt_row gt_center" headers="estimate">7.78</td>
<td class="gt_row gt_center" headers="conf.low">1.38, 43.9</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Registry</td>
<td class="gt_row gt_center" headers="estimate">0.77</td>
<td class="gt_row gt_center" headers="conf.low">0.16, 3.73</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Setting Type</td>
<td class="gt_row gt_center" headers="estimate"><br>
</td>
<td class="gt_row gt_center" headers="conf.low"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Academic_Medical_Center</td>
<td class="gt_row gt_center" headers="estimate">—</td>
<td class="gt_row gt_center" headers="conf.low">—</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Community_Hospital</td>
<td class="gt_row gt_center" headers="estimate">0.24</td>
<td class="gt_row gt_center" headers="conf.low">0.03, 2.29</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Primary_Care</td>
<td class="gt_row gt_center" headers="estimate">0.08</td>
<td class="gt_row gt_center" headers="conf.low">0.01, 0.90</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Specialty_Clinic</td>
<td class="gt_row gt_center" headers="estimate">0.57</td>
<td class="gt_row gt_center" headers="conf.low">0.05, 6.39</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Capture Method (Elec vs Paper)</td>
<td class="gt_row gt_center" headers="estimate">0.70</td>
<td class="gt_row gt_center" headers="conf.low">0.19, 2.59</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">idStudy_f.sd__(Intercept)</td>
<td class="gt_row gt_center" headers="estimate">1.50</td>
<td class="gt_row gt_center" headers="conf.low"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">idRegion_f.sd__(Intercept)</td>
<td class="gt_row gt_center" headers="estimate">0.53</td>
<td class="gt_row gt_center" headers="conf.low"><br>
</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Residual.sd__Observation</td>
<td class="gt_row gt_center" headers="estimate">13.5</td>
<td class="gt_row gt_center" headers="conf.low"><br>
</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="3" class="gt_sourcenote">Abbreviation: CI = Confidence Interval</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display model summary</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>model_summary <span class="ot">&lt;-</span> <span class="fu">tidy</span>(ikdc_model, <span class="at">effects =</span> <span class="st">"fixed"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(.x, <span class="dv">3</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Mixed Effects Model Summary</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Fixed effects coefficients:</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>{knitr<span class="sc">::</span><span class="fu">kable</span>(model_summary, <span class="at">format =</span> <span class="st">'markdown'</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-model-summary" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-model-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;8: Summary of fixed effects coefficients for linear mixed model
</figcaption>
<div aria-describedby="tbl-model-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 10%">
<col style="width: 46%">
<col style="width: 13%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">effect</th>
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">57.049</td>
<td style="text-align: right;">1.322</td>
<td style="text-align: right;">43.139</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">Age_c</td>
<td style="text-align: right;">-0.189</td>
<td style="text-align: right;">0.036</td>
<td style="text-align: right;">-5.232</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">I(Age_c^2)</td>
<td style="text-align: right;">-0.005</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">-1.589</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">Sex_fMale</td>
<td style="text-align: right;">3.828</td>
<td style="text-align: right;">0.368</td>
<td style="text-align: right;">10.401</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">BMI_c</td>
<td style="text-align: right;">-0.422</td>
<td style="text-align: right;">0.032</td>
<td style="text-align: right;">-13.292</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">MeniscusCartilage_fYes</td>
<td style="text-align: right;">-11.755</td>
<td style="text-align: right;">0.358</td>
<td style="text-align: right;">-32.878</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">comorbidity_count</td>
<td style="text-align: right;">-1.857</td>
<td style="text-align: right;">0.171</td>
<td style="text-align: right;">-10.849</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">ses_score_c</td>
<td style="text-align: right;">0.107</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">6.343</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">education_years_c</td>
<td style="text-align: right;">0.006</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">0.109</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">study_typeRCT</td>
<td style="text-align: right;">2.051</td>
<td style="text-align: right;">0.883</td>
<td style="text-align: right;">2.323</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">study_typeRegistry</td>
<td style="text-align: right;">-0.259</td>
<td style="text-align: right;">0.803</td>
<td style="text-align: right;">-0.322</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">setting_typeCommunity_Hospital</td>
<td style="text-align: right;">-1.415</td>
<td style="text-align: right;">1.145</td>
<td style="text-align: right;">-1.235</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">setting_typePrimary_Care</td>
<td style="text-align: right;">-2.558</td>
<td style="text-align: right;">1.252</td>
<td style="text-align: right;">-2.043</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">setting_typeSpecialty_Clinic</td>
<td style="text-align: right;">-0.562</td>
<td style="text-align: right;">1.233</td>
<td style="text-align: right;">-0.456</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">capture_methodPaper</td>
<td style="text-align: right;">-0.352</td>
<td style="text-align: right;">0.666</td>
<td style="text-align: right;">-0.529</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Create predictions</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate predictions</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>dtAnalysisPredict <span class="ot">&lt;-</span> marginaleffects<span class="sc">::</span><span class="fu">predictions</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  ikdc_model,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">re.form =</span> <span class="cn">NA</span> <span class="co"># restrict to fixed effects only</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#marry into dtAnalysis</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>dtAnalysis1 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  dtAnalysis <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">rowid =</span> <span class="fu">row_number</span>()</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  dtAnalysisPredict <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    rowid,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    estimate</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="st">"rowid"</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">IKDCPredict =</span> <span class="st">"estimate"</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate overall mean IKDC for reference population (literature data)</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>overall_mean <span class="ot">&lt;-</span> dtAnalysis1 <span class="sc">%&gt;%</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DataSource <span class="sc">==</span> <span class="st">"Literature"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(IKDC) <span class="sc">%&gt;%</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<p>Overall mean IKDC in literature: 48.92</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dtAnalysis2 <span class="ot">&lt;-</span> dtAnalysis1 <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Method 1: Nuttal et al. approach - Ratio method (unit/scale-preserving)</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># adjusted score = (observed/expected) * overall observed average</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">IKDC_adj_nuttal =</span> (IKDC <span class="sc">/</span> IKDCPredict) <span class="sc">*</span> overall_mean, </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Method 2: Resnik and Hart approach - Difference method</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># adjusted score = expected - observed (performance indicator)</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a> <span class="at">IKDC_adj_resnik =</span> IKDCPredict <span class="sc">-</span> IKDC, <span class="co"># Positive = better than expected</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Method 3: Varagunam et al. approach - Residual + overall mean</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co"># adjusted score = (observed - expected) + overall observed average</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="at">IKDC_adj_varagunam =</span> (IKDC <span class="sc">-</span> IKDCPredict) <span class="sc">+</span> overall_mean</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step x: Calculate adjusted scores specifically for SHARKS dataset</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>sharks_results <span class="ot">&lt;-</span> dtAnalysis2 <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DataSource <span class="sc">==</span> <span class="st">"Local_SHARKS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(IKDC, IKDCPredict, IKDC_adj_nuttal, IKDC_adj_resnik, IKDC_adj_varagunam),</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">mean =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">sd =</span> <span class="sc">~</span> <span class="fu">sd</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">"{.col}_{.fn}"</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span>n,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"measure"</span>, <span class="st">"statistic"</span>),</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">"_(?=mean|sd$)"</span>,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> statistic,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">measure =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDC"</span> <span class="sc">~</span> <span class="st">"Observed IKDC"</span>,</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDCPredict"</span> <span class="sc">~</span> <span class="st">"Expected IKDC"</span>, </span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDC_adj_nuttal"</span> <span class="sc">~</span> <span class="st">"Adjusted IKDC (Nuttal)"</span>,</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDC_adj_resnik"</span> <span class="sc">~</span> <span class="st">"Performance Score (Resnik)"</span>,</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDC_adj_varagunam"</span> <span class="sc">~</span> <span class="st">"Adjusted IKDC (Varagunam)"</span>,</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> measure</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(mean, sd), <span class="sc">~</span> <span class="fu">round</span>(.x, <span class="dv">2</span>))</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate confidence intervals for adjusted scores using tidyverse</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>sharks_ci <span class="ot">&lt;-</span> dtAnalysis2 <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DataSource <span class="sc">==</span> <span class="st">"Local_SHARKS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(IKDC, IKDC_adj_nuttal, IKDC_adj_varagunam, IKDC_adj_resnik),</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">se =</span> <span class="sc">~</span> <span class="fu">sd</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(.x))),</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">ci_lower =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sd</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(.x))),</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">ci_upper =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sd</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(.x)))</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">"{.col}_{.fn}"</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"measure"</span>, <span class="st">"statistic"</span>),</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"^(.+)_(mean|se|ci_lower|ci_upper)$"</span>,  <span class="co"># Changed this line</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> statistic,</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">measure =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDC"</span> <span class="sc">~</span> <span class="st">"Observed IKDC"</span>,</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDC_adj_nuttal"</span> <span class="sc">~</span> <span class="st">"Adjusted IKDC (Nuttal)"</span>,</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDC_adj_varagunam"</span> <span class="sc">~</span> <span class="st">"Adjusted IKDC (Varagunam)"</span>,</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>      measure <span class="sc">==</span> <span class="st">"IKDC_adj_resnik"</span> <span class="sc">~</span> <span class="st">"Performance Score (Resnik)"</span>,</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> measure</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(mean, se, ci_lower, ci_upper), <span class="sc">~</span> <span class="fu">round</span>(.x, <span class="dv">2</span>)),</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_text =</span> <span class="fu">paste0</span>(mean, <span class="st">" ("</span>, ci_lower, <span class="st">", "</span>, ci_upper, <span class="st">")"</span>)</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(measure, ci_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<p>SHARKS Dataset Case-Mix Adjustment Results (n = 500) (Mean and 95% CI) |Measure |95% CI |</p>
<p>SHARKS Dataset Case-Mix Adjustment Results (n = 500) (Mean and 95% CI) |:————————–|:——————–|</p>
<p>SHARKS Dataset Case-Mix Adjustment Results (n = 500) (Mean and 95% CI) |Observed IKDC |51.03 (49.38, 52.67) |</p>
<p>SHARKS Dataset Case-Mix Adjustment Results (n = 500) (Mean and 95% CI) |Adjusted IKDC (Nuttal) |52.57 (51.03, 54.12) |</p>
<p>SHARKS Dataset Case-Mix Adjustment Results (n = 500) (Mean and 95% CI) |Adjusted IKDC (Varagunam) |52.5 (51.01, 54) |</p>
<p>SHARKS Dataset Case-Mix Adjustment Results (n = 500) (Mean and 95% CI) |Performance Score (Resnik) |-3.59 (-5.09, -2.09) |</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|label: fig-adjust-compare</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#|fig-cap: "Comparison between observed and adjusted scores for SHARKS IKDC baseline"</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Visualization of adjustment effects</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot comparing observed vs adjusted scores for SHARKS</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>plot_data <span class="ot">&lt;-</span> dtAnalysis2 <span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DataSource <span class="sc">==</span> <span class="st">"Local_SHARKS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(idPatient, IKDC, IKDCPredict, IKDC_adj_nuttal, IKDC_adj_varagunam) <span class="sc">|&gt;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>idPatient, <span class="at">names_to =</span> <span class="st">"Score_Type"</span>, <span class="at">values_to =</span> <span class="st">"Score"</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(Score_Type)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Score_Type =</span> <span class="fu">factor</span>(Score_Type, </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"IKDC"</span>, <span class="st">"IKDCPredict"</span>, <span class="st">"IKDC_adj_nuttal"</span>, <span class="st">"IKDC_adj_varagunam"</span>),</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Observed-Sim"</span>, <span class="st">"Expected"</span>, <span class="st">"Adjusted (Nuttal)"</span>, <span class="st">"Adjusted (Varagunam)"</span>))</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>comparison_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plot_data, <span class="fu">aes</span>(<span class="at">x =</span> Score_Type, <span class="at">y =</span> Score)) <span class="sc">+</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_slabinterval</span>(<span class="at">side =</span> <span class="st">"right"</span>)  <span class="sc">+</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> overall_mean, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">1.5</span>, <span class="at">y =</span> overall_mean <span class="sc">+</span> <span class="dv">2</span>, </span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"Lit Mean = {round(overall_mean, 1)}"</span>), </span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"IKDC Score Comparison: Observed vs Case-Mix Adjusted"</span>,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"SHARKS Dataset - Different Adjustment Methods"</span>,</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Score Type"</span>,</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"IKDC Score"</span>,</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Score Type"</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">knit_print</span>(comparison_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="SHARKS_ACLRBase_SVR3_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 8: Clinical interpretation using epoxy</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate key metrics for interpretation</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>sharks_metrics <span class="ot">&lt;-</span> dtAnalysis2 <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DataSource <span class="sc">==</span> <span class="st">"Local_SHARKS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">observed_mean =</span> <span class="fu">mean</span>(IKDC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">expected_mean =</span> <span class="fu">mean</span>(IKDCPredict, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">performance_mean =</span> <span class="fu">mean</span>(IKDC_adj_resnik, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">adjusted_nuttal_mean =</span> <span class="fu">mean</span>(IKDC_adj_nuttal, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Performance assessment</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>performance_status <span class="ot">&lt;-</span> <span class="fu">if_else</span>(</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  sharks_metrics<span class="sc">$</span>observed_mean <span class="sc">&gt;</span> sharks_metrics<span class="sc">$</span>expected_mean,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BETTER"</span>,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"WORSE"</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Benchmark comparison</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>benchmark_status <span class="ot">&lt;-</span> <span class="fu">if_else</span>(</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  sharks_metrics<span class="sc">$</span>adjusted_nuttal_mean <span class="sc">&gt;</span> overall_mean,</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ABOVE"</span>,</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BELOW"</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<p>Potential Clinical Interpretation</p>
<p><strong>SHARKS Dataset Performance:</strong> • SHARKS reports baseline IKDC that is <strong>BETTER</strong> than expected based on case-mix • Observed mean: 51 • Expected mean: 47.4<br>
• Performance difference: 3.6 points</p>
<p><strong>Benchmark Comparison:</strong> • After case-mix adjustment, SHARKS patients present with an IKDC score that is <strong>ABOVE</strong> the literature average • Adjusted IKDC (Nuttal method): 52.6 vs Literature mean: 48.9</p>
</div>
<p>The simulated example shows a theoretical difference that could be observed between adjusted model and the raw scores and illustrates the utility of such an approach when interpreting the related literature, or extending the model to follow up scores after surgery.</p>
</section>
</section>
<section id="sample-size-considerations" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Sample size considerations</h1>
<p>The required sample sizes generally relate to the number of samples available in the local dataset, as well as potentially how many studies are required in the literature to establish a reasonably powered model.</p>
<p>To provide some initial guidance on the issue of the local dataset, we can utilise power calculations methods <span class="citation" data-cites="riley2020">(<a href="#ref-riley2020" role="doc-biblioref">Riley et al. 2020</a>)</span>, as well as parameters from previously published prediction models <span class="citation" data-cites="burgess2019">(<a href="#ref-burgess2019" role="doc-biblioref">Burgess et al. 2019</a>)</span>.</p>
<p>For this exercise we will consider the IKDC score as a continuous outcome and using the <em>pmsampsize</em> <span class="citation" data-cites="pmsampsize">(<a href="#ref-pmsampsize" role="doc-biblioref">Ensor 2023</a>)</span> package, we can begin to estimate the number of cases that may be required. For a model with a continuous outcome we need the following parameters;</p>
<ul>
<li><p>rsquared: A systematic review of previous case-mixture adjustment models in musculoskeletal care <span class="citation" data-cites="burgess2019">(<a href="#ref-burgess2019" role="doc-biblioref">Burgess et al. 2019</a>)</span> reported a range of rsquared (unadjusted) of 18 to 42%. For the purposes of this initial estimate, we will use 30% and include a shrinkage parameter to mitigate model optimism.</p></li>
<li><p>parameters: This can be tricky to estimate, as the number of parameters is not necessarily equivalent to the number of <em>variables</em> selected. The variable summary in <a href="#tbl-variables" class="quarto-xref">Table&nbsp;5</a> may provide some guidance. Depending on how certain variables are included in the model (splines, dummy variables etc) the exact number of parameters required may vary. Nevertheless an initial estimate may be 20 parameters should be sufficient to include the main variables into the model.</p></li>
<li><p>shrinkage: To mitigate the risk that previous models have been overfitted, a reduction of 10% on the model coefficients is included.</p></li>
<li><p>intercept: The average from the SHARKS registry report is 47.4 at baseline.</p></li>
<li><p>sd: The standard deviation of the IKDC from the SHARKS registry report is 12.6 at baseline</p></li>
</ul>
<p>When these are inputted into the function we retrieve the following;</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>pmsampsize<span class="sc">::</span><span class="fu">pmsampsize</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"c"</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">rsquared =</span> <span class="fl">0.3</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">shrinkage =</span> <span class="fl">0.9</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">parameters =</span> <span class="dv">20</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">intercept =</span> <span class="fl">49.1</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> <span class="dv">17</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>NB: Assuming 0.05 acceptable difference in apparent &amp; adjusted R-squared 
NB: Assuming MMOE &lt;= 1.1 in estimation of intercept &amp; residual standard deviation 
SPP - Subjects per Predictor Parameter 
 
            Samp_size Shrinkage Parameter Rsq   SPP
Criteria 1        448     0.900        20 0.3 22.40
Criteria 2        281     0.851        20 0.3 14.05
Criteria 3        254     0.839        20 0.3 12.70
Criteria 4*       448     0.900        20 0.3 22.40
Final             448     0.900        20 0.3 22.40
 
 Minimum sample size required for new model development based on user inputs = 448  
 
 * 95% CI for intercept = (47.78, 50.42), for sample size n = 448</code></pre>
</div>
</div>
<p>With the Tibiofemoral Instability cohort of the SHARKS registry numbering 528 cases, there should be sufficient data available to develop a model for the local dataset.</p>
<p>The second consideration for sample size is how many cases and studies may be required to develop a broader version of the model incorporating differences in regions and research methodology. This is difficult to estimate without making a number of assumptions based on limited information and may be best left to a point in the future when a clearer picture of all of the available literature is available. This would be a key task for the formal development of the protocol.</p>
</section>
<section id="ethical-considerations" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Ethical Considerations</h1>
<p>HREC-approval has been granted for the SHARKS registry to collect relevant information for cases presenting to the department matching the inclusion criteria of the Registry.</p>
<p>As long as chart review proposed matches the variables described in the core dataset of the Registry, no additional HREC submissions will be required for this project.</p>
</section>
<section id="study-output" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Study Output</h1>
<section id="target-presentations" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="target-presentations"><span class="header-section-number">10.1</span> Target Presentations</h2>
<p>Abstract submission for AOA ASM 2025 closed 4-May-2025. Consideration should be given for this project to be presented at QLD AOA and AOA ASM in 2026.</p>
</section>
<section id="target-publication" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="target-publication"><span class="header-section-number">10.2</span> Target Publication</h2>
<p>Preprints are recommended as the first output type to be generated at each stage of the project (see below). However if a journal publication is of importance, despite the controversy surrounding the current state of scientific publishing <span class="citation" data-cites="vineis2024">(<a href="#ref-vineis2024" role="doc-biblioref">Vineis 2024</a>)</span> there are a number of considerations that can guide the best target outlet;</p>
<p>Access type - most association journals offer both open or subscription options for access to articles, which can be a deciding factor for most authors.</p>
<p>The audience - not every article speaks to the surgical community in orthopaedics due to its broad, multidisciplinary nature. However if a surgical audience is preferred the reference list of this report may provide some guidance. For example;</p>
<div id="keycitation">
<blockquote class="blockquote">
<p>Ridha, A., Raj, S., Searle, H., Ahmed, I., Smith, N., Metcalfe, A., &amp; Khatri, C. (2025). The recovery trajectory of anterior cruciate ligament ruptures in randomised controlled trials: A systematic review and meta-analysis of operative and nonoperative treatments. <em>Knee Surgery, Sports Traumatology, Arthroscopy: Official Journal of the ESSKA</em>. https://doi.org/10.1002/ksa.12626</p>
<p>Burgess, R., Lewis, M., &amp; Hill, J. C. (2021). Musculoskeletal case-mix adjustment in a UK primary/community care cohort: Testing musculoskeletal models to make recommendations in this setting. <em>Musculoskeletal Science &amp; Practice</em>, <em>56</em>(102455), 102455.</p>
<p>Mesterton, J., Willers, C., Dahlström, T., &amp; Rolfson, O. (2020). Comparison of individual and neighbourhood socioeconomic status in case mix adjustment of hospital performance in primary total hip replacement in Sweden: a register-based study. <em>BMC Health Services Research</em>, <em>20</em>(1), 645.</p>
</blockquote>
</div>
<p>Writing quality - a large component of moving through editorial and peer review is the quality of the article with respect to clarity, coherence and strength of the evidence presented to make a conclusion. Reliance on reporting guidelines can provide a robust approach to heading off most criticisms of quality, as long as it is paired with reasonable writing. Guidelines such as STROBE or RECORD from the EQUATOR network</p>
</section>
</section>
<section id="study-management" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Study Management</h1>
<section id="assumptions" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="assumptions"><span class="header-section-number">11.1</span> Assumptions</h2>
<ul>
<li><p>QEII staff will undertake data collection activities</p>
<ul>
<li><p>Chart review for SHARKS dataset</p></li>
<li><p>Literature review search, retrieval and extraction for IKDC baseline-related literature</p></li>
</ul></li>
<li><p>EBM Analytics will provide the following</p>
<ul>
<li><p>Protocol development and output preparation</p></li>
<li><p>Data curation from SHARKS registry dataset</p></li>
<li><p>Model development</p></li>
<li><p>Analysis reporting</p></li>
<li><p>Contributions to research outputs</p></li>
</ul></li>
</ul>
</section>
<section id="activities" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="activities"><span class="header-section-number">11.2</span> Activities</h2>
<p>The best analogy for the proposed study is that of the development and validation of a prognostic clinical prediction model, for which some guidance with respect to best practice has been provided in the relevant literature <span class="citation" data-cites="collins2024">(<a href="#ref-collins2024" role="doc-biblioref">G. S. Collins et al. 2024</a>)</span>. For the purposes of this study plan, the open science practices for medicine as described by <span class="citation" data-cites="cobey2023">(<a href="#ref-cobey2023" role="doc-biblioref">Cobey et al. 2023</a>)</span> are used to outline the key activities of the proposed project. All items are recommended in this context, except for publication to journals.</p>
<div id="tbl-activities" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-activities-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;9: Key activities recommended as part of the proposed study
</figcaption>
<div aria-describedby="tbl-activities-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<thead>
<tr class="header">
<th>Stage</th>
<th>Action</th>
<th>Comments - Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Setup</td>
<td>Protocol preparation</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Protocol preprint</td>
<td>use medrxiv or other suitable server</td>
</tr>
<tr class="odd">
<td></td>
<td>Protocol registration</td>
<td>ANZ Clinical Trials Registry</td>
</tr>
<tr class="even">
<td></td>
<td>Protocol journal publication</td>
<td>Potentially optional</td>
</tr>
<tr class="odd">
<td>Data Collection</td>
<td>Confirm reporting guidelines</td>
<td>consider PRISMA, STROBE, TRIPOD-AI from <a href="https://www.equator-network.org/">EQUATOR</a></td>
</tr>
<tr class="even">
<td></td>
<td>Conduct literature review, screening and data extraction</td>
<td><a href="https://bond.edu.au/iebh/systematic-review-accelerator-sra">Systematic review accelerator</a> at Bond University</td>
</tr>
<tr class="odd">
<td></td>
<td>Conduct quality assessment</td>
<td>Quality of study inputs relative to the question posed; consider GRADE</td>
</tr>
<tr class="even">
<td></td>
<td>Track risk of bias assessment</td>
<td>ROB v2 from Cochrane</td>
</tr>
<tr class="odd">
<td></td>
<td>Align dataset to predictors in protocol</td>
<td>Quality Checking</td>
</tr>
<tr class="even">
<td>Analysis</td>
<td>Manuscript setup</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>Analysis report preparation</td>
<td><p>Including model builds (literature and SHARKS dataset)</p>
<p>Conduct sensitivity analyses</p></td>
</tr>
<tr class="even">
<td></td>
<td>Provide sufficient information for model implementation</td>
<td>Report model coefficients and other characteristics as required</td>
</tr>
<tr class="odd">
<td></td>
<td>Data and code publication</td>
<td>Data and code repositories with persistent identifiers <span class="citation" data-cites="cobey2023">(<a href="#ref-cobey2023" role="doc-biblioref">Cobey et al. 2023</a>)</span></td>
</tr>
<tr class="even">
<td></td>
<td>Preparation as supplementary material</td>
<td>Includes links to code and data</td>
</tr>
<tr class="odd">
<td>Synthesis Reporting</td>
<td>Manuscript preparation</td>
<td>Pre-existing shared file with outline pre-populated</td>
</tr>
<tr class="even">
<td></td>
<td>Reporting checklist</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>Author conflicts of interest</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Author contributions</td>
<td>Use persistent identifiers (ORCID)</td>
</tr>
<tr class="odd">
<td></td>
<td>Prepare funding statement</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Publish preprint</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>Publish manuscript (open-access)</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The activities outlined in <a href="#tbl-activities" class="quarto-xref">Table&nbsp;9</a> are aligned to best-practice open science, however there are opportunities (albeit limited) to reduce some of the more formal activities (trial registration, protocol publication) and reduce project complexity.</p>
</section>
<section id="timeline" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="timeline"><span class="header-section-number">11.3</span> Timeline</h2>
<div class="cell" data-fig-width="6.5" data-layout-align="default">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>flowchart LR</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    subgraph T1 ["Months 1-3: Setup Phase"]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        A[Protocol] </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>        D[Output]</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>        A -.-&gt; A1["Preparation&lt;br/&gt;Circulation&lt;br/&gt;Finalisation"]</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>        D -.-&gt; D1["Preprint&lt;br/&gt;Journal Submission&lt;br/&gt;Publication"]</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    subgraph T2 ["Months 4-6: Data collection"]</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>        A[Literature Review] </span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>        D[Registry Access]</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>        A -.-&gt; A1["Database searches&lt;br/&gt;Article screening&lt;br/&gt;Quality assessment"]</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        D -.-&gt; D1["Ethics approval&lt;br/&gt;Data access agreements&lt;br/&gt;Query development"]</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    subgraph T3 ["Months 7-9: Data Collection"]</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>        B[Data Extraction]</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>        E[Cohort Retrieval]</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>        B -.-&gt; B1["Parameter extraction&lt;br/&gt;Data standardization&lt;br/&gt;Validation checks"]</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>        E -.-&gt; E1["Registry queries&lt;br/&gt;Patient identification&lt;br/&gt;Data export"]</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>    subgraph T4 ["Months 10-12: Analysis Phase"]</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>        C[Simulation Modeling]</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>        F[Chart Review]</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>        C -.-&gt; C1["Model development&lt;br/&gt;Parameter estimation&lt;br/&gt;Scenario testing"]</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>        F -.-&gt; F1["Manual review&lt;br/&gt;Clinical validation&lt;br/&gt;Quality control"]</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>    subgraph T5 ["Months 13-15: Synthesis"]</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>        G[Results Integration]</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>        H[Manuscript Preparation]</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>        G -.-&gt; G1["Compare findings&lt;br/&gt;Statistical analysis&lt;br/&gt;Interpretation"]</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>        H -.-&gt; H1["Writing&lt;br/&gt;Peer review&lt;br/&gt;Submission"]</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>    A --&gt; B</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>    B --&gt; C</span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>    C --&gt; G</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>    D --&gt; E</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>    E --&gt; F</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>    F --&gt; G</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>    G --&gt; H</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a>    style A1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5</span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a>    style B1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5</span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a>    style C1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5</span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a>    style D1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5</span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a>    style E1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5</span>
<span id="cb26-55"><a href="#cb26-55" aria-hidden="true" tabindex="-1"></a>    style F1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5</span>
<span id="cb26-56"><a href="#cb26-56" aria-hidden="true" tabindex="-1"></a>    style G1 fill:#f0fff0,stroke:#32cd32,stroke-dasharray: 5 5</span>
<span id="cb26-57"><a href="#cb26-57" aria-hidden="true" tabindex="-1"></a>    style H1 fill:#f0fff0,stroke:#32cd32,stroke-dasharray: 5 5</span>
<span id="cb26-58"><a href="#cb26-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-59"><a href="#cb26-59" aria-hidden="true" tabindex="-1"></a>    classDef litBox fill:#e6f3ff,stroke:#4682b4,stroke-width:2px</span>
<span id="cb26-60"><a href="#cb26-60" aria-hidden="true" tabindex="-1"></a>    classDef regBox fill:#fffacd,stroke:#daa520,stroke-width:2px</span>
<span id="cb26-61"><a href="#cb26-61" aria-hidden="true" tabindex="-1"></a>    classDef synthBox fill:#f0fff0,stroke:#32cd32,stroke-width:2px</span>
<span id="cb26-62"><a href="#cb26-62" aria-hidden="true" tabindex="-1"></a>    classDef timeBox fill:#f5f5f5,stroke:#666,stroke-width:1px</span>
<span id="cb26-63"><a href="#cb26-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-64"><a href="#cb26-64" aria-hidden="true" tabindex="-1"></a>    class A,B,C litBox</span>
<span id="cb26-65"><a href="#cb26-65" aria-hidden="true" tabindex="-1"></a>    class D,E,F regBox</span>
<span id="cb26-66"><a href="#cb26-66" aria-hidden="true" tabindex="-1"></a>    class G,H synthBox</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-timeline" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-timeline-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-timeline">
flowchart LR
    subgraph T1 ["Months 1-3: Setup Phase"]
        A[Protocol] 
        D[Output]
        
        A -.-&gt; A1["Preparation&lt;br/&gt;Circulation&lt;br/&gt;Finalisation"]
        D -.-&gt; D1["Preprint&lt;br/&gt;Journal Submission&lt;br/&gt;Publication"]
    end

    subgraph T2 ["Months 4-6: Data collection"]
        A[Literature Review] 
        D[Registry Access]
        
        A -.-&gt; A1["Database searches&lt;br/&gt;Article screening&lt;br/&gt;Quality assessment"]
        D -.-&gt; D1["Ethics approval&lt;br/&gt;Data access agreements&lt;br/&gt;Query development"]
    end
    
    subgraph T3 ["Months 7-9: Data Collection"]
        B[Data Extraction]
        E[Cohort Retrieval]
        
        B -.-&gt; B1["Parameter extraction&lt;br/&gt;Data standardization&lt;br/&gt;Validation checks"]
        E -.-&gt; E1["Registry queries&lt;br/&gt;Patient identification&lt;br/&gt;Data export"]
    end
    
    subgraph T4 ["Months 10-12: Analysis Phase"]
        C[Simulation Modeling]
        F[Chart Review]
        
        C -.-&gt; C1["Model development&lt;br/&gt;Parameter estimation&lt;br/&gt;Scenario testing"]
        F -.-&gt; F1["Manual review&lt;br/&gt;Clinical validation&lt;br/&gt;Quality control"]
    end
    
    subgraph T5 ["Months 13-15: Synthesis"]
        G[Results Integration]
        H[Manuscript Preparation]
        
        G -.-&gt; G1["Compare findings&lt;br/&gt;Statistical analysis&lt;br/&gt;Interpretation"]
        H -.-&gt; H1["Writing&lt;br/&gt;Peer review&lt;br/&gt;Submission"]
    end
    
    A --&gt; B
    B --&gt; C
    C --&gt; G
    D --&gt; E
    E --&gt; F
    F --&gt; G
    G --&gt; H
    
    style A1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5
    style B1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5
    style C1 fill:#f0f8ff,stroke:#4682b4,stroke-dasharray: 5 5
    style D1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5
    style E1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5
    style F1 fill:#fff8dc,stroke:#daa520,stroke-dasharray: 5 5
    style G1 fill:#f0fff0,stroke:#32cd32,stroke-dasharray: 5 5
    style H1 fill:#f0fff0,stroke:#32cd32,stroke-dasharray: 5 5
    
    classDef litBox fill:#e6f3ff,stroke:#4682b4,stroke-width:2px
    classDef regBox fill:#fffacd,stroke:#daa520,stroke-width:2px
    classDef synthBox fill:#f0fff0,stroke:#32cd32,stroke-width:2px
    classDef timeBox fill:#f5f5f5,stroke:#666,stroke-width:1px
    
    class A,B,C litBox
    class D,E,F regBox
    class G,H synthBox
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-timeline-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Project timeline aligned to proposed project activities
</figcaption>
</figure>
</div>
</div>
</div>
<p>Overall, the timeline estimate <a href="#fig-timeline" class="quarto-xref">Figure&nbsp;6</a> for completion of the proposed study is 15 months, not including the time required for administration to approve the financial arrangements. There is ample opportunities to shorten these estimates with concurrent activities, particularly during data collection and preparation of manuscript(s) and outputs.</p>
</section>
<section id="contributors" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="contributors"><span class="header-section-number">11.4</span> Contributors</h2>
<p>The decision to expand the contributors on the proposed project is left with the principal investigator. Diversification of the project team can be beneficial with respect better quality methodology and interpretation of results.</p>
<div id="tbl-contributors" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-contributors-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10: Matrix of contributors at the time of study planning
</figcaption>
<div aria-describedby="tbl-contributors-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 26%">
<col style="width: 19%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Role</th>
<th>Project Role</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Lorenzo Calabro</td>
<td>Consultant Orthopaedic Surgeon</td>
<td>Principal Investigator</td>
<td>Direct supervision of SHOs; overall project supervision</td>
</tr>
<tr class="even">
<td>Corey Scholes</td>
<td>Chief Science Officer, EBM Analytics</td>
<td>Analyst and Methodologist</td>
<td>Provide oversight to interpretation of analysis</td>
</tr>
<tr class="odd">
<td>Garry Kirwan</td>
<td>Assistant Director Physiotherapy</td>
<td>Collaborator</td>
<td>Clinical appraisal of case-mixture (prognostic) models</td>
</tr>
<tr class="even">
<td>SHO - 1 &amp; 2</td>
<td>Senior House Officer</td>
<td>Collaborator</td>
<td>Data collection and contributions to output preparation</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The present stakeholder list <a href="#tbl-contributors" class="quarto-xref">Table&nbsp;10</a> is relatively narrow, but should be sufficient to generate a quality analysis to answer the questions posed.</p>
</section>
<section id="funding-and-conflicts-of-interest" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="funding-and-conflicts-of-interest"><span class="header-section-number">11.5</span> Funding and Conflicts of Interest</h2>
<p>Funding will be provided the Orthopaedic Research Fund at QEII Hospital.</p>
<p>Author CS is a stockholder of EBM Analytics and declares an institutional relationship with the Department of Orthopaedics (QEII Hospital) for the purposes of this project.</p>
<p>The proposed stakeholders of this project have no other known conflicts of interest, but all are encouraged to complete <a href="https://www.icmje.org/disclosure-of-interest/">ICMJE disclosure</a> forms as routine in preparation for the release of research output.</p>

</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-aldag2023" class="csl-entry" role="listitem">
Aldag, Levi, Johnathan Dallman, Erik Henkelman, Ashley Herda, Jeffrey Randall, Armin Tarakemeh, Tucker Morey, and Bryan G. Vopat. 2023. <span>“Various Definitions of Failure Are Used in Studies of Patients Who Underwent Anterior Cruciate Ligament Reconstruction.”</span> <em>Arthroscopy, Sports Medicine, and Rehabilitation</em> 5 (6): 100801. <a href="https://doi.org/10.1016/j.asmr.2023.100801">https://doi.org/10.1016/j.asmr.2023.100801</a>.
</div>
<div id="ref-amir-behghadami2020" class="csl-entry" role="listitem">
Amir-Behghadami, Mehrdad, and Ali Janati. 2020. <span>“Population, Intervention, Comparison, Outcomes and Study (PICOS) Design as a Framework to Formulate Eligibility Criteria in Systematic Reviews.”</span> <em>Emergency Medicine Journal</em> 37 (6): 387–87. <a href="https://doi.org/10.1136/emermed-2020-209567">https://doi.org/10.1136/emermed-2020-209567</a>.
</div>
<div id="ref-anderson2006" class="csl-entry" role="listitem">
Anderson, Allen F., James J. Irrgang, Mininder S. Kocher, Barton J. Mann, and John J. Harrast. 2006. <span>“The International Knee Documentation Committee Subjective Knee Evaluation Form.”</span> <em>The American Journal of Sports Medicine</em> 34 (1): 128–35. <a href="https://doi.org/10.1177/0363546505280214">https://doi.org/10.1177/0363546505280214</a>.
</div>
<div id="ref-burgess2019" class="csl-entry" role="listitem">
Burgess, R., A. Bishop, M. Lewis, and J. Hill. 2019. <span>“Models Used for Case-Mix Adjustment of Patient Reported Outcome Measures (PROMs) in Musculoskeletal Healthcare: A Systematic Review of the Literature.”</span> <em>Physiotherapy</em> 105 (2): 137–46. <a href="https://doi.org/10.1016/j.physio.2018.10.002">https://doi.org/10.1016/j.physio.2018.10.002</a>.
</div>
<div id="ref-cobey2023" class="csl-entry" role="listitem">
Cobey, Kelly D., Stefanie Haustein, Jamie Brehaut, Ulrich Dirnagl, Delwen L. Franzen, Lars G. Hemkens, Justin Presseau, et al. 2023. <span>“Community Consensus on Core Open Science Practices to Monitor in Biomedicine.”</span> <em>PLOS Biology</em> 21 (1): e3001949. <a href="https://doi.org/10.1371/journal.pbio.3001949">https://doi.org/10.1371/journal.pbio.3001949</a>.
</div>
<div id="ref-collins2024" class="csl-entry" role="listitem">
Collins, Gary S., Rebecca Whittle, Garrett S. Bullock, Patricia Logullo, Paula Dhiman, Jennifer A. de Beyer, Richard D. Riley, and Michael M. Schlussel. 2024. <span>“Open Science Practices Need Substantial Improvement in Prognostic Model Studies in Oncology Using Machine Learning.”</span> <em>Journal of Clinical Epidemiology</em> 165 (January): 111199. <a href="https://doi.org/10.1016/j.jclinepi.2023.10.015">https://doi.org/10.1016/j.jclinepi.2023.10.015</a>.
</div>
<div id="ref-collins2011" class="csl-entry" role="listitem">
Collins, Natalie J., Devyani Misra, David T. Felson, Kay M. Crossley, and Ewa M. Roos. 2011. <span>“Measures of Knee Function: International Knee Documentation Committee (IKDC) Subjective Knee Evaluation Form, Knee Injury and Osteoarthritis Outcome Score (KOOS), Knee Injury and Osteoarthritis Outcome Score Physical Function Short Form (KOOS<span>-</span>PS), Knee Outcome Survey Activities of Daily Living Scale (KOS<span>-</span>ADL), Lysholm Knee Scoring Scale, Oxford Knee Score (OKS), Western Ontario and McMaster Universities Osteoarthritis Index (WOMAC), Activity Rating Scale (ARS), and Tegner Activity Score (TAS).”</span> <em>Arthritis Care &amp; Research</em> 63 (S11). <a href="https://doi.org/10.1002/acr.20632">https://doi.org/10.1002/acr.20632</a>.
</div>
<div id="ref-dunn2010" class="csl-entry" role="listitem">
Dunn, Warren R., Kurt P. Spindler, Annunziato Amendola, Jack T. Andrish, Christopher C. Kaeding, Robert G. Marx, Eric C. McCarty, et al. 2010. <span>“Which Preoperative Factors, Including Bone Bruise, Are Associated With Knee Pain/Symptoms at Index Anterior Cruciate Ligament Reconstruction (ACLR)?”</span> <em>The American Journal of Sports Medicine</em> 38 (9): 1778–87. <a href="https://doi.org/10.1177/0363546510370279">https://doi.org/10.1177/0363546510370279</a>.
</div>
<div id="ref-pmsampsize" class="csl-entry" role="listitem">
Ensor, Joie. 2023. <span>“Pmsampsize: Sample Size for Development of a Prediction Model.”</span> <a href="https://CRAN.R-project.org/package=pmsampsize">https://CRAN.R-project.org/package=pmsampsize</a>.
</div>
<div id="ref-haddaway2021" class="csl-entry" role="listitem">
Haddaway, N R, M J Grainger, and C T Gray. 2021. <span>“Citationchaser: An r Package and Shiny App for Forward and Backward Citations Chasing in Academic Searching,”</span> February.
</div>
<div id="ref-irrgang2001" class="csl-entry" role="listitem">
Irrgang, James J., Allen F. Anderson, Arthur L. Boland, Christopher D. Harner, Masahiro Kurosaka, Phillipe Neyret, John C. Richmond, and K. Donald Shelborne. 2001. <span>“Development and Validation of the International Knee Documentation Committee Subjective Knee Form.”</span> <em>The American Journal of Sports Medicine</em> 29 (5): 600–613. <a href="https://doi.org/10.1177/03635465010290051301">https://doi.org/10.1177/03635465010290051301</a>.
</div>
<div id="ref-magnussen2009" class="csl-entry" role="listitem">
Magnussen, Robert A., Lars-Petter Granan, Warren R. Dunn, Annunziato Amendola, Jack T. Andrish, Robert Brophy, James L. Carey, et al. 2009. <span>“Cross<span>-</span>Cultural Comparison of Patients Undergoing ACL Reconstruction in the United States and Norway.”</span> <em>Knee Surgery, Sports Traumatology, Arthroscopy</em> 18 (1): 98–105. <a href="https://doi.org/10.1007/s00167-009-0919-5">https://doi.org/10.1007/s00167-009-0919-5</a>.
</div>
<div id="ref-nguyen2016" class="csl-entry" role="listitem">
Nguyen, Joseph T., David Wasserstein, Emily K. Reinke, Kurt P. Spindler, Nabil Mehta, John B. Doyle, Robert G. Marx, et al. 2016. <span>“Does the Chronicity of Anterior Cruciate Ligament Ruptures Influence Patient-Reported Outcomes Before Surgery?”</span> <em>The American Journal of Sports Medicine</em> 45 (3): 541–49. <a href="https://doi.org/10.1177/0363546516669344">https://doi.org/10.1177/0363546516669344</a>.
</div>
<div id="ref-ridha2025" class="csl-entry" role="listitem">
Ridha, Ali, Siddarth Raj, Henry Searle, Imran Ahmed, Nicholas Smith, Andrew Metcalfe, and Chetan Khatri. 2025. <span>“The Recovery Trajectory of Anterior Cruciate Ligament Ruptures in Randomised Controlled Trials: A Systematic Review and Meta<span>-</span>Analysis of Operative and Nonoperative Treatments.”</span> <em>Knee Surgery, Sports Traumatology, Arthroscopy</em>, February. <a href="https://doi.org/10.1002/ksa.12626">https://doi.org/10.1002/ksa.12626</a>.
</div>
<div id="ref-riley2020" class="csl-entry" role="listitem">
Riley, Richard D, Joie Ensor, Kym I E Snell, Frank E Harrell, Glen P Martin, Johannes B Reitsma, Karel G M Moons, Gary Collins, and Maarten van Smeden. 2020. <span>“Calculating the Sample Size Required for Developing a Clinical Prediction Model.”</span> <em>BMJ</em>, March, m441. <a href="https://doi.org/10.1136/bmj.m441">https://doi.org/10.1136/bmj.m441</a>.
</div>
<div id="ref-sibert2021" class="csl-entry" role="listitem">
Sibert, Nora Tabea, Holger Pfaff, Clara Breidenbach, Simone Wesselmann, and Christoph Kowalski. 2021. <span>“Different Approaches for Case-Mix Adjustment of Patient-Reported Outcomes to Compare Healthcare Providers<span></span>Methodological Results of a Systematic Review.”</span> <em>Cancers</em> 13 (16): 3964. <a href="https://doi.org/10.3390/cancers13163964">https://doi.org/10.3390/cancers13163964</a>.
</div>
<div id="ref-tennant2020" class="csl-entry" role="listitem">
Tennant, Peter W G, Eleanor J Murray, Kellyn F Arnold, Laurie Berrie, Matthew P Fox, Sarah C Gadd, Wendy J Harrison, et al. 2020. <span>“Use of Directed Acyclic Graphs (DAGs) to Identify Confounders in Applied Health Research: Review and Recommendations.”</span> <em>International Journal of Epidemiology</em> 50 (2): 620–32. <a href="https://doi.org/10.1093/ije/dyaa213">https://doi.org/10.1093/ije/dyaa213</a>.
</div>
<div id="ref-ting2020" class="csl-entry" role="listitem">
Ting, Chee Han, Corey Scholes, David Zbrojkiewicz, and Christopher Bell. 2020. <span>“Baseline Analysis of Patients Presenting for Surgical Review of Anterior Cruciate Ligament Rupture Reveals Heterogeneity in Patient-Reported Outcome Measures.”</span> <em>The Journal of Knee Surgery</em> 35 (02): 159–66. <a href="https://doi.org/10.1055/s-0040-1713658">https://doi.org/10.1055/s-0040-1713658</a>.
</div>
<div id="ref-vineis2024" class="csl-entry" role="listitem">
Vineis, Paolo. 2024. <span>“Scientific Publishing: Crisis, Challenges, and New Opportunities.”</span> <em>Frontiers in Public Health</em> 12 (July). <a href="https://doi.org/10.3389/fpubh.2024.1417019">https://doi.org/10.3389/fpubh.2024.1417019</a>.
</div>
<div id="ref-winterstein2013" class="csl-entry" role="listitem">
Winterstein, Andrew P., Timothy A. McGuine, Kathleen E. Carr, and Scott J. Hetzel. 2013. <span>“Comparison of IKDC and SANE Outcome Measures Following Knee Injury in Active Female Patients.”</span> <em>Sports Health: A Multidisciplinary Approach</em> 5 (6): 523–29. <a href="https://doi.org/10.1177/1941738113499300">https://doi.org/10.1177/1941738113499300</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>